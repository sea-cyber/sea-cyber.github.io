var rtMapsApiUrl=rtGlobalObj.rtApi.apiMapsUrl,rtMapsUrl=rtGlobalObj.rtApi.mapsUrl,trip_id="";jQuery((function(e){var a=null,t="";if(e(document).ready((function(){if(document.addEventListener("userReady",(function(){e(document).on("click",".action-button",(function(){!function(e){var a=e.data("event-name");analytics.track("Action",{category:"Button Click",label:a},{integrations:{Mixpanel:!1}});let t=Object.assign({},rtGlobalObj.tracking.properties);t.location="home",t.selection=a,-1!==a.indexOf("Header")&&(t.location="menu");analytics.track("Action Launcher Clicked",t)}(e(this))})),e("body").hasClass("page-template-frontpage")&&(0!=rtGlobalObj.user.data.RVer||e("#persona-landing-form").hasClass("active")||(e("#persona-landing-form").closest(".search__forms").addClass("persona-visible"),e("#persona-landing-form").addClass("visible").delay(300).queue((function(a){e(this).addClass("active"),a()})))),e(".header-planner-widget").length&&(0!=rtGlobalObj.user.data.RVer||e("#header-persona-landing-form").hasClass("active")||(e("#header-persona-landing-form").closest(".search__forms").addClass("persona-visible"),e(".header-planner-widget-inner").addClass("show-persona"),e("#header-persona-landing-form").addClass("visible").delay(300).queue((function(a){e(this).addClass("active"),a()}))))})),""!==userlocale_search&&e(".origin-inferred").length){let a=rtMapsApiUrl+"/api/v2/autocomplete?query="+userlocale_search;e.ajax({crossDomain:!0,url:a,xhrFields:rtGlobalObj.rtApi.xhrFields,headers:{Authorization:"Basic "+btoa(rtGlobalObj.authApi.stageAuthU+":"+rtGlobalObj.authApi.stageAuthP),"Content-Type":"application/json"},method:"GET",error:function(e,a,t){console.log(e.statusText),console.log(a),console.log(t)}}).done((function(a){if(0==a.length||0==a.items.length)cannot_find_user_location();else{let t=a.items[0];e(".no-origin").hide(),e(".ip-origin .ip-origin-toggle").text(userlocale_label),e(".ip-origin").show();let o=c(t,"planner_module");e(".origin-inferred").each((function(){let a=e(".search_input_from",this);e(".search__label",this).addClass("search__label_focused"),e(a).val(e(o).data("waypoint_reset_name")),e.each(e(o).data(),(function(t,o){e(a).data(t,o)}))}))}}))}})),e(document).on("mouseenter",".search__autocomplete ul li",(function(a){var t=e(a.target);selectedFrom=e(a.target).index(),e(".search__autocomplete ul li").removeClass("hovered"),t.addClass("hovered")})),e(document).on("click",(function(a){e(a.target).hasClass("autocomplete_item")||e(a.target).closest(".autocomplete_item").length||(e(a.target).closest(".header-planner-widget-inner").length?e(".header-planner-widget-inner").hasClass("expanded")||s("open"):e(".header-planner-widget").hasClass("expanded")&&s("close"))})),e(document).on("click",".header-planner-widget-inner a.action-button",(function(a){a.preventDefault();var t=e(this),o=t.data("target"),i=e("body").find("[data-tab='"+o+"']");"header-search-2"==o?(e("button.active-selector").addClass("explore"),t.closest(".search__options").addClass("explore")):(e("button.active-selector").removeClass("explore"),t.closest(".search__options").removeClass("explore")),t.addClass("js__tab_active").siblings(".header__js__tab").removeClass("js__tab_active"),i.addClass("js__tab-target_active").siblings(".js__tab-target").removeClass("js__tab-target_active")})),e(document).on("click",".persona-toggle-option",(function(){var a=e(this).parent(".persona-toggle");e(".persona-toggle-option",a).removeClass("active"),e(this).addClass("active")})),e(document).on("click",".js__tab",(function(){var a=e(this),t=e("body").find("[data-tab='"+a.data("target")+"']");return a.addClass("js__tab_active").siblings(".js__tab").removeClass("js__tab_active"),t.addClass("js__tab-target_active").siblings(".js__tab-target").removeClass("js__tab-target_active"),!1})),e(document).on("click",".change-origin-toggle",(function(){var a=e(this).closest(".origin-cta-copy").parent("p").nextAll("form");e(a).addClass("input-open"),e(this).closest(".origin-cta-copy").hide()})),e("body").on("click",".plan_trip_search_button",(function(a){let t=e(this).closest("form"),o="";t.data("tab")&&(o=t.attr("data-tab"));var i=e(".search_input_from",t),r=e(".search_input_to",t),n=(e(this).closest(".search__group"),"");-1!==o.indexOf("header")?(i=e(".header-search_input_from",t),r=e(".header-search_input_to",t),""!=e(this).val()||e(this).closest(".header-planner-widget-inner").hasClass("expanded")||(s("open"),r.focus())):e("#trip-category-selector").length&&""!==e("#trip-category-selector li:first-child").data("value")&&(n=","+(n=e("#trip-category-selector li:first-child").data("value")));let l=i.data("waypoint"),d=i.val(),c=r.data("waypoint"),p=!1;var u,_;""===d||void 0!==l&&""!==l||((u=t.find(".search_input_from_error")).show(),(_=u.closest(".search__group")).addClass("form-error"),p=!0);void 0!==c&&""!==c||((u=t.find(".search_input_to_error")).show(),(_=u.closest(".search__group")).addClass("form-error"),_.find(".search__input").focus(),p=!0);return!1===p&&g(!0,t,null,n),!1})),e("body").on("click","#explorer_search_button",(function(a){var t=e(this);"one_waypoint_trip"==hero_explore_behavior?n(t,a):l(t,a)})),e("body").on("click","#header-explorer_search_button",(function(a){var t=e(this);"one_waypoint_trip"==menu_explore_behavior?n(t,a):l(t,a)})),e(document).on("click",".autocomplete_item_places",(function(a){let t=e(this),o=t.data("place");return e("#search_input_places").data("place",o),e("#search_input_places_error").hide(),e("#search_input_places").val(e(t).text()),!1})),e(document).on("click","a.ep-listing",(function(a){a.preventDefault();let t={},o=e.extend(t,e(this).data("waypoint"));delete o.image,delete o.label,o.poi_id=o.id,delete o.id;let i={},s="";var r="";o&&(t=o,s=o.title+" Trip",i={trip:{name:s,waypoints:[t]}}),setTimeout((function(){var e=window.open("about:blank","_blank");u(e),setTimeout((function(){f(i,!0,"ep",t).then((function(a){if(a){r=b(o,o,"&z=11"),v(a,e,r,!0)}}))}),15),e.focus()}),15)})),e("body").on("click",(function(a){e(".search__form").length>0&&(e(a.target).is(".search__input")||e(a.target).is(".popup__close")||e(a.target).is(".search__link")||(e(".search_input_from, .search_input_to, .header-search_input_from, .header-search_input_to").each((function(){this_input=e(this),void 0!==this_input.data("waypoint")&&void 0!==this_input.data("waypoint_reset_name")&&(this_input.val(this_input.data("waypoint_reset_name")),this_input.nextAll(".search_input_from_error").hide())})),e(".autocomplete_item").remove()),e(a.target).is(".search__input")||e(a.target).is(".popup__close")||e(a.target).is(".search_input_from")||e(a.target).is(".search_input_to")||(!function(){void 0!==e("#search_input_places").data("waypoint")&&void 0!==e("#search_input_places").data("waypoint_reset_name")&&void 0!==e("#search_input_places").data("raw_waypoint")&&(e("#search_input_places").val(e("#search_input_places").data("waypoint_reset_name")),e("#search_input_places_error").hide());void 0!==e("#header-search_input_places").data("waypoint")&&void 0!==e("#header-search_input_places").data("waypoint_reset_name")&&void 0!==e("#header-search_input_places").data("raw_waypoint")&&(e("#header-search_input_places").val(e("#header-search_input_places").data("waypoint_reset_name")),e("#header-search_input_places_error").hide())}(),e(".autocomplete_item_places").remove()))})),e(".search__autocomplete").on("click","li",(function(a){var t=e(this),o=t.data("value");t.closest(".search__group").find("input").val(o),t.closest(".search__group").removeClass("search__group_focused"),t.closest(".search__group").removeClass("form-error"),m(t)})),e(document).on("click","#trip-category-selector li",(function(a){let t=Object.assign({},rtGlobalObj.tracking.properties);var o=e(this).find(".name").text(),i=e("#header-item").find(".name").text();e('a[data-target="search-2"]').hasClass("js__tab_active")?t.context="home explore":t.context="home trip builder",e("#trip-category-selector").hasClass("category-expanded")?(e("#trip-category-selector").removeClass("category-expanded"),e(this).is("#dropdown-header")||e(this).hasClass("active")||(""==e(this).data("value")?(t.option_name=o,t.option_param=null):(t.option_name=o,t.option_param=e(this).data("value")),"undefined"!=typeof analytics&&analytics.track("Category Option Selected",t))):(e("#trip-category-selector").addClass("category-expanded"),"undefined"!=typeof analytics&&analytics.track("Category Options Opened",t));var s=e(this).html(),r=e(this).data("value");e(this).is("#dropdown-header")||(e("#trip-category-selector li").removeClass("active"),e(this).addClass("active")),o!==i?e("#header-item").removeClass("not-displayed"):e("#header-item").addClass("not-displayed"),e("#dropdown-header").html(s),e("#dropdown-header").data("value",r)})),e(document).on("blur","#trip-category-selector",(function(a){e(this).removeClass("category-expanded")})),e(document).on("focus",".search__group input",(function(){let a=e(this),t=a.closest(".search__group"),o=a.closest(".search__form"),i=a.next(".search__autocomplete").find("ul");t.find(".search__label").addClass("search__label_focused"),t.addClass("active-search"),o.find(".search__group").addClass("inactive"),t.removeClass("inactive"),o.removeClass("from-focused"),o.removeClass("to-focused"),o.removeClass("location-focused"),i.is(":empty")&&t.addClass("empty-list"),function(e){let a=Object.assign({},rtGlobalObj.tracking.properties);var t=e;a.context=p(t),analytics.track("Search Opened",a)}(a),a.hasClass("header-search_input_from")&&o.addClass("from-focused"),a.hasClass("header-search_input_to")&&o.addClass("to-focused"),a.is("#header-search_input_places")&&o.addClass("location-focused")})),e(document).on("blur",".search__group input",(function(a){let o=e(this),i=(o.nextAll(".search__autocomplete"),o.nextAll(".autocomplete_error"),o.closest(".search__group")),s=o.closest(".search__form");i.removeClass("active-search"),o.val()||i.find(".search__label").removeClass("search__label_focused"),setTimeout(()=>{if(!o.data("waypoint_name")){var i=o.val();if(""!==i&&i!==t){let s=JSON.stringify(i).slice(1,-1),r=Object.assign({},rtGlobalObj.tracking.properties);e(a.relatedTarget).hasClass("search__button")?r.focused_go=!0:r.focused_go=!1,r.query=s,r.context=p(o),t=i,analytics.track("Search Failed",r)}}},200),s.removeClass("from-focused"),s.removeClass("to-focused"),s.removeClass("location-focused")})),e(document).on("keyup","#trip-category-selector",(function(a){var t=e(this),o=t.find("li.active"),i=o.index();let s=Object.assign({},rtGlobalObj.tracking.properties);if(e('a[data-target="search-2"]').hasClass("js__tab_active")?s.context="home explore":s.context="home trip builder",13!==a.keyCode)return 38===a.keyCode?(null===i&&(i=e("#trip-category-selector").find("li").length),--i<0&&(i=t.find("li").length-1),t.find("li").removeClass("active"),void t.find("li").eq(i).addClass("active")):40===a.keyCode?(null===i&&(i=-1),++i>=t.find("li").length&&(i=0),t.find("li").removeClass("active"),void t.find("li").eq(i).addClass("active")):void 0;if(t.hasClass("category-expanded")){var r=o.html(),n=o.data("value"),l=o.find(".name").text(),d=e("#header-item").find(".name").text();e("#trip-category-selector li").removeClass("active"),e(this).addClass("active"),l!==d?e("#header-item").removeClass("not-displayed"):e("#header-item").addClass("not-displayed"),e("#dropdown-header").html(r),e("#dropdown-header").data("value",n),t.removeClass("category-expanded"),e(this).is("#dropdown-header")||(""==n?(s.option_name=l,s.option_param=null):(s.option_name=l,s.option_param=n),"undefined"!=typeof analytics&&analytics.track("Category Option Selected",s))}else t.addClass("category-expanded"),"undefined"!=typeof analytics&&analytics.track("Category Options Opened",s)})),e(document).on("keyup",".search__group input",(function(){e(this).closest(".search__group").addClass("search__group_focused")})),e(document).on("keyup","body",(function(a){var t=a.keyCode,o=a.target;9===t&&(e(o).closest(".header-planner-widget").length||e(".header-planner-widget").hasClass("expanded")&&r())})),e(".search_input_from, .header-search_input_from, .search_input_to, .header-search_input_to").each((function(){let a=e(this);a.on("keyup",h((function(e){e.preventDefault(),d(a.val().trim(),a,e)}),200))})),e("#search_input_places, #header-search_input_places").on("keyup",h((function(a){a.preventDefault();let t=e(this);d(t.val().trim(),t,a)}),200)),e("body").hasClass("page-template-frontpage")){var o=e(".hero-container .planner-widget"),i=o.position().top+o.outerHeight(!0);e(window).on("scroll",(function(a){e(document).scrollTop()>i+200?e("header.main-header").addClass("header-fixed"):e("header.main-header").removeClass("header-fixed")}))}function s(a){"open"==a?(e(".header-planner-widget").addClass("expanded"),e("body").addClass("planner-open"),e(".body-hide").addClass("body-hidden")):r()}function r(){e(".header-planner-widget").removeClass("expanded"),e("body").removeClass("planner-open"),e(".header-planner-widget .search__group").removeClass("inactive"),e(".body-hide").removeClass("body-hidden")}function n(a,t){t.preventDefault();let o=a.closest("form"),i=o.attr("data-tab");var r="";a.closest(".search__group");-1!==i.indexOf("header")?(searchInputLocation=e("#header-search_input_places",o),""!=searchInputLocation.val()||searchInputLocation.closest(".header-planner-widget-inner").hasClass("expanded")||(s("open"),searchInputLocation.focus())):e("#trip-category-selector").length&&""!==e("#trip-category-selector li:first-child").data("value")&&(r=","+(r=e("#trip-category-selector li:first-child").data("value")));let n="";var l=a.closest(".search__form").find(".search__input"),d=a.closest(".search__forms").find(".persona-grid"),c=a.closest(".search__form").find(".autocomplete_error"),p=c.closest(".search__group");let u=l.data("waypoint"),_=l.data("raw_waypoint");l.data("item_type");if(y(d),void 0===u||0===u.length)return c.show(),p.addClass("form-error"),p.find(".search__input").focus(),l.removeData("waypoint"),!1;n=b(u,_,"&z=11"),setTimeout((function(){""!==n?g(!0,o,n,r):e("#search_input_places_error").show()}),15)}function l(a,t){t.preventDefault();let o=a.closest("form"),i=o.attr("data-tab");a.closest(".search__group");-1!==i.indexOf("header")&&(searchInputLocation=e("#header-search_input_places",o),""!=searchInputLocation.val()||searchInputLocation.closest(".header-planner-widget-inner").hasClass("expanded")||(s("open"),searchInputLocation.focus()));let r="";var n=a.closest(".search__form").find(".search__input"),l=a.closest(".search__forms").find(".persona-grid"),d=a.closest(".search__form").find(".autocomplete_error"),c=d.closest(".search__group");let p=n.data("waypoint"),_=n.data("raw_waypoint");n.data("item_type");if(y(l),void 0===p||0===p.length)return d.show(),c.addClass("form-error"),c.find(".search__input").focus(),n.removeData("waypoint"),!1;r=b(p,_,"&z=11"),setTimeout((function(){if(""!==r){var a=window.open("about:blank","_blank");u(a),a.location.href=r,a.focus()}else e("#search_input_places_error").show()}),15)}function d(t,o,i){var s=e(o).nextAll(".search__autocomplete"),r=e(o).nextAll(".autocomplete_error"),n=e(o).closest(".search__group");if(""===t)return function(e,a,t){e.find("ul").empty(),t.addClass("empty-list");var o=t.find(".search__input");o.removeData("waypoint"),o.removeData("waypoint_reset_name"),o.removeData("waypoint_name"),o.removeData("item_type"),o.attr("data-waypoint",""),o.attr("data-waypoint_reset_name",""),o.attr("data-waypoint_name",""),o.attr("data-item_type",""),o.val(""),t.removeClass("active-search"),t.removeClass("form-error"),a.hide()}(s,r,n),n.removeClass("search__group_focused"),void(a=null);if(r.hide(),13===i.keyCode){if(i.preventDefault(),i.stopPropagation(),null!==a){let e=s.find("ul").find("li").eq(a);m(e);var l=e.data("value");return e.closest(".search__group").find("input").val(l),e.closest(".search__group").removeClass("search__group_focused"),e.closest(".search__group").removeClass("form-error"),!1}return!1}if(38===i.keyCode)return null===a&&(a=e(".search_autocomplete_from").find("ul").find("li").length),--a<0&&(a=e(".search_autocomplete_from").find("ul").find("li").length-1),s.find("ul").find("li").removeClass("hovered"),void s.find("ul").find("li").eq(a).addClass("hovered");if(40===i.keyCode)return null===a&&(a=-1),++a>=s.find("ul").find("li").length&&(a=0),s.find("ul").find("li").removeClass("hovered"),void s.find("ul").find("li").eq(a).addClass("hovered");let d=rtMapsApiUrl+"/api/v2/autocomplete?query="+t;e.ajax({crossDomain:!0,url:d,xhrFields:rtGlobalObj.rtApi.xhrFields,async:!0,headers:{Authorization:"Basic "+btoa(rtGlobalObj.authApi.stageAuthU+":"+rtGlobalObj.authApi.stageAuthP),"Content-Type":"application/json"},method:"GET",error:function(e,a,t){console.log(e.statusText),console.log(a),console.log(t)}}).done((function(t){if(0==t.length)return n.addClass("empty-list"),void e(".search_input_from_error").show();0==t.items.length?n.addClass("empty-list"):n.removeClass("empty-list");let i=function(e){let a=[];return e.forEach((function(e,t){let o=c(e);a.push(o)})),a}(t.items);a=null,""===o.val().trim()?(s.find("ul").empty(),n.addClass("empty-list"),o.removeData("waypoint"),trip_id="",selectedFrom=-1):s.find("ul").html(i)}))}function c(e,a="default"){let t="",o="";if("poi"===e.type&&""!==e.data.name){let a={type:"poi",tracking_type:"poi",poi_id:e.data.id};"address_attributes"in a||(a.address_attributes={}),image_url=e.data.image_url,image_file_name=image_url.substring(image_url.lastIndexOf("/")),image_path=image_url.substr(0,image_url.lastIndexOf("/")),image_resize_string="-quality_72_-interlace_Plane_-resize_64x64_U__-gravity_center_-extent_64x64",image_url.includes("atlas-assets.roadtrippers")?resized_image_url=image_path+"/"+image_resize_string+image_file_name:resized_image_url=image_url;let o="",i="",s="",r="",n="",l="";void 0!==e.data.country&&null!==e.data.country&&void 0!==e.data.country.name&&null!==e.data.country.name&&(n=e.data.country.name,a.address_attributes.country=n,l=e.data.country.abbreviation,"US"==l?n="USA":"CD"==l&&(n="DRC")),void 0!==e.data.address1&&null!==e.data.address1&&(i=e.data.address1,userlocale==l&&(o=i)),void 0!==e.data.city&&null!==e.data.city&&void 0!==e.data.city.name&&null!==e.data.city.name&&(s=e.data.city.name,a.address_attributes.city=s,""!==o?o+=", "+s:o=s),void 0!==e.data.state&&null!==e.data.state&&void 0!==e.data.state.name&&null!==e.data.state.name&&(a.address_attributes.state=e.data.state.name),void 0!==e.data.state&&null!==e.data.state&&void 0!==e.data.state.abbreviation&&null!==e.data.state.abbreviation&&(r=e.data.state.abbreviation,""!==o?o+=", "+r:o=r),""!==n&&(userlocale==l&&""==i&&""==s&&""==n||userlocale!==l)&&(o+=", "+n),t+='<li class="autocomplete_item" data-item_type="'+e.type+'" data-trip_name="'+e.data.name.replace("'","’")+' Trip" data-waypoint_reset_name="'+e.data.name+", "+o+'" data-simple_name="'+e.data.name+'" data-waypoint_name="'+e.data.name+'" data-value="'+e.data.name+", "+o+'" data-raw_waypoint="'+JSON.stringify(e.data).replace(/\"/g,"&quot;").replace(/\'/g,"&apos;")+"\" data-waypoint='"+JSON.stringify(a).replace(/\"/g,"&quot;").replace(/\'/g,"&apos;")+"'><i><img src=\""+resized_image_url+'" width="16" height="16" alt=""></i>'+e.data.name+"<span>, "+o+"</span></li>"}else if("address"===e.type&&void 0!==e.data.address1&&null!==e.data.address1||"city"===e.type||"state"===e.type||"country"===e.type||"address"===e.type&&"default"!==a){let a={type:"geo",tracking_type:e.type},s="",r=[],n=[],l="",d="";void 0!==e.data.country&&null!==e.data.country&&void 0!==e.data.country.name&&null!==e.data.country.name&&(l=e.data.country.name,d=e.data.country.abbreviation,"US"==d?l="USA":"CD"==d&&(l="DRC")),void 0!==e.data.address1&&null!==e.data.address1&&(r.push(decodeURI(e.data.address1)),n.push(decodeURI(e.data.address1)),o=e.data.address1,"address_attributes"in a||(a.address_attributes={}),a.address_attributes.address1=e.data.address1),void 0!==e.data.city&&null!==e.data.city&&void 0!==e.data.city.name&&null!==e.data.city.name?(r.push(e.data.city.name),n.push(e.data.city.name),o=e.data.city.name,"address_attributes"in a||(a.address_attributes={}),a.address_attributes.city=e.data.city.name):"city"===e.type&&(r.push(e.data.name),n.push(e.data.name),o=e.data.name,"address_attributes"in a||(a.address_attributes={}),a.address_attributes.city=e.data.name),void 0!==e.data.state&&null!==e.data.state&&void 0!==e.data.state.name&&null!==e.data.state.name?(0==r.length?state_name=e.data.state.name:state_name=e.data.state.abbreviation,r.push(state_name),n.push(state_name),o=e.data.state.name,"address_attributes"in a||(a.address_attributes={}),a.address_attributes.state=e.data.state.name):"state"===e.type&&(r.push(e.data.name),n.push(e.data.name),o=e.data.name,"address_attributes"in a||(a.address_attributes={}),a.address_attributes.state=e.data.name),void 0!==e.data.country&&null!==e.data.country&&void 0!==e.data.country.name&&null!==e.data.country.name?(userlocale!=d||0!=r.length&&1!=r.length?userlocale!==d&&(r.push(l),n.push(l)):(r.push(l),n.push(l)),o=e.data.country.name,"address_attributes"in a||(a.address_attributes={}),a.address_attributes.country=e.data.country.abbreviation):"country"===e.type&&(userlocale!=d||0!=r.length&&1!=r.length?userlocale!==d&&(r.push(e.data.name),n.push(e.data.name)):(r.push(e.data.name),n.push(e.data.name)),o=e.data.name,"address_attributes"in a||(a.address_attributes={}),a.address_attributes.country=e.data.name),r.length>1&&(o=r[0]),n.length>1&&(n[0]=n[0]+"<span>",n[n.length-1]=n[n.length-1]+"</span>"),s=r.join(", "),itemValueWithSpan=n.join(", ");let c="",p="";void 0!==e.data.loc?(c=parseFloat(e.data.loc[0]),p=parseFloat(e.data.loc[1])):(c=parseFloat((e.data.bounds_box[0][0]+e.data.bounds_box[1][0])/2),p=parseFloat((e.data.bounds_box[0][1]+e.data.bounds_box[1][1])/2)),a.location=[c,p],a.name=(i=s,window.btoa(unescape(encodeURIComponent(i)))),t+='<li class="autocomplete_item" data-item_type="'+e.type+'" data-raw_waypoint="'+JSON.stringify(e.data).replace(/\"/g,"&quot;").replace(/\'/g,"&apos;")+'" data-waypoint_reset_name="'+s+'" data-simple_name="'+e.data.name+'" data-waypoint_name="'+s+'" data-trip_name="'+o.replace("'","’")+' Trip" data-value="'+s+"\" data-waypoint='"+JSON.stringify(a).replace(/\"/g,"&quot;").replace(/\'/g,"&apos;")+'\'><i><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"></path></svg></i>'+itemValueWithSpan+"</li>"}var i;return t}function p(a){return e("body").hasClass("home")||e("body").hasClass("page-template-frontpage")?a.is(".search_input_from")||a.is(".search_input_to")?"home trip builder":a.is(".header-search_input_from")||a.is(".header-search_input_to")?"menu trip builder":a.is("#header-search_input_places")?"menu explore":"home explore":a.is(".header-search_input_from")||a.is(".header-search_input_to")?"menu trip builder":a.is("#header-search_input_places")?"menu explore":"landing page trip builder"}function u(e){e.document.write("<html><head><title></title>"),e.document.write("<style>body {cursor: wait}</style>"),e.document.write("</head><body>"),e.document.write('<style> .loading-view { align-items: center; background: rgb(243, 244, 231); display: flex; justify-content: center; height: 100%; left: 0; position: fixed; top: 0; width: 100%; } .loading { display: flex; } .circle { animation: preloader 1500ms steps(3) infinite; background: rgb(155, 155, 155); border-radius: 50%; height: 30px; margin: 0 0 0 6px; width: 30px; } .circle:first-child { margin: 0; } .circle:nth-child(2){ animation-delay: 500ms; } .circle:nth-child(3){ animation-delay: 1000ms; } @keyframes preloader { from { opacity: 1; } to { opacity: .5; } } </style> </head> <body> <div class="loading-view"> <div class="loading"> <div class="circle"></div> <div class="circle"></div> <div class="circle"></div> </div> </div>'),e.document.write("</body></html>")}function _(e){try{e=decodeURIComponent(escape(window.atob(e)))}catch(e){}return e}function h(e,a,t){var o;return function(){var i=this,s=arguments,r=function(){o=null,t||e.apply(i,Array.prototype.slice.call(s))},n=t&&!o;clearTimeout(o),o=setTimeout(r,a),n&&e.apply(i,s)}}function m(a){let t=a,o=t.data("waypoint"),i=t.data("waypoint_reset_name"),s=t.data("raw_waypoint"),r=t.data("waypoint_name"),n=t.data("trip_name"),l=t.data("item_type"),d=t.parent().parent(),c=t.closest(".search__group"),p=t.closest(".search__form"),u=d.attr("id"),_=c.find(".search__input"),h=c.find(".autocomplete_error"),m=p.find(".persona-toggle");_.data("waypoint",o),_.data("raw_waypoint",s),_.data("waypoint_name",r),_.data("waypoint_reset_name",i),_.data("item_type",l),(d.hasClass("search_autocomplete_to")||"search_autocomplete_places"===u||"header-search_autocomplete_places"===u)&&_.data("trip_name",n),h.hide();t.data("value");let y=_.val(),g=t.data(),f="";return f=e("body").hasClass("home")||e("body").hasClass("page-template-frontpage")?d.is("#search_autocomplete_places")?"home explore":d.is("#header-search_autocomplete_places")?"menu explore":"home trip builder":d.is("#header-search_autocomplete_places")?"menu trip builder":"landing page trip builder",function(e,a,t){let o=Object.assign({},rtGlobalObj.tracking.properties);o.added_categories=[],o.context=e,o.object_name=t.simple_name,o.query=a,void 0!==t.place&&(o.object_id=t.place.id,o.object_type=t.place.tracking_type);void 0!==t.waypoint&&(o.object_type=t.waypoint.tracking_type,"poi"===t.waypoint.tracking_type&&(o.object_id=t.waypoint.poi_id));analytics.track("Search Object Selected",o)}(f,y,g),e("body").hasClass("page-template-frontpage")||0!=rtGlobalObj.user.data.RVer||e(m).hasClass("active")||e(m).addClass("visible").delay(300).queue((function(a){e(this).addClass("active"),a()})),!1}function y(a){let t=e(".persona-toggle-option.active",a);if("rv"==e(t).data("persona-option")&&0==rtGlobalObj.user.data.RVer){rtrv.postUserEvent({type:"track",name:"RV Trip Started",properties:{context:"RoadPress trip planner module"}}).then((function(e){null!=e&&(rtGlobalObj.user.data=e,rtGlobalObj.user.data.RVer=!0)}),(function(){console.log("issue updating persona")}));let e=Object.assign({},rtGlobalObj.tracking.properties);analytics.track("RV Travel Type Selected",e)}}function g(a,t,o=null,i=""){let s={},r={},n={},l="";t.data("tab")&&(l=t.attr("data-tab"));var d=e(".search_input_from",t),c=e(".search_input_to",t);if("header-search-1"==l?(d=e(".header-search_input_from",t),c=e(".header-search_input_to",t)):"header-search-2"==l?c=e("#header-search_input_places"):"search-2"==l&&(c=e("#search_input_places")),e.extend(s,d.data("waypoint")),e.extend(r,c.data("waypoint")),-1!==l.indexOf("header"))y(e("#header-persona-landing-form"));else if(e("body").hasClass("page-template-frontpage")){y(e("#persona-landing-form"))}else y(t);"geo"===s.type&&(s.name=_(s.name).replace("'","’")),"geo"===r.type&&(r.name=_(r.name).replace("'","’"));let p=c.data("trip_name");n=e.isEmptyObject(s)?{trip:{name:p,waypoints:[r]}}:{trip:{name:p,waypoints:[s,r]}};var h=window.open("about:blank","_blank");u(h),setTimeout((function(){f(n,a,l,r,s,i).then((function(e){e&&v(e,h,o,!0,i)}))}),15)}function f(a,t,o,i=null,s=null,r=""){let n=JSON.stringify(a),l=rtMapsApiUrl+"/api/v2/trips";a.trip.name;return new Promise((function(a,r){e.ajax({crossDomain:!0,url:l,xhrFields:rtGlobalObj.rtApi.xhrFields,data:n,headers:{Authorization:"Basic "+btoa(rtGlobalObj.authApi.stageAuthU+":"+rtGlobalObj.authApi.stageAuthP),"Content-Type":"application/json"},method:"POST",beforeSend:function(){if(!0===t){}},success:function(e){void 0!==e.trip&&null!==e.trip?(!function(e,a,t=null,o=null){let i=Object.assign({},rtGlobalObj.tracking.properties),s=e.trip.name;t||(t=1==e.trip.waypoints.length?e.trip.waypoints[0]:e.trip.waypoints[1]);i.added_categories=e.trip.categories,i.destination_name=s.replace(" Trip",""),void 0!==t.address_attributes&&null!==t.address_attributes&&(void 0!==t.address_attributes.city&&null!==t.address_attributes.city&&(i.destination_city=t.address_attributes.city),void 0!==t.address_attributes.state&&null!==t.address_attributes.state&&(i.destination_state=t.address_attributes.state));i.destination_type=t.tracking_type,void 0!==e.trip.waypoints[1]&&void 0!==e.trip.waypoints[1].start_date&&null!==e.trip.waypoints[1].start_date&&(i.end_date=e.trip.waypoints[1].start_date);void 0!==e.trip.waypoints[0].start_date&&null!==e.trip.waypoints[0].start_date&&(i.start_date=e.trip.waypoints[0].start_date);switch(a){case"header-search-1":i.context="menu";break;case"header-search-2":i.context="menu explore";break;case"search-1":i.context="home";break;case"search-2":i.context="home explore";break;case"ep":i.context="content cta";break;default:i.context="landing page trip builder"}i.trip_id=e.trip.id,i.trip_owner_id=rtGlobalObj.user.data.id?rtGlobalObj.user.data.id:null,i.trip_owner_type="user",i.trip_viewer_type="owner",analytics.track("Trip Start Completed",i)}(e,o,i,s),trip_id=e.trip.id,a(e.trip.id)):console.log(e)}})}))}function v(e,a,t=null,o=!0,i=""){null!==navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/)&&(o=!1,i=""),t&&!o?t+=i:t=t&&o?t+"&a4=t!"+e+i:rtMapsUrl+"?a4=t!"+e+i,a.location.href=t,a.focus()}function b(e,a,t=""){return null!==navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/)?void 0!==a.url&&""!==a.url&&null!==a.url?url=a.url:void 0!==e.location&&null!==e.location?url=rtMapsUrl+"/search?sort_by=popular&location_name="+e.name+",%20OH%20"+a.country.abbreviation+"&location="+e.location[0]+","+e.location[1]:void 0!==e.loc&&null!==e.loc?url=rtMapsUrl+"/search?sort_by=popular&location_name="+e.name+",%20OH%20"+a.country.abbreviation+"&location="+e.loc[0]+","+e.loc[1]:url=rtMapsUrl+"/search?sort_by=popular&location_name="+e.name+",%20OH%20"+a.country.abbreviation+"&location="+e.location[0]+","+e.location[1]:void 0!==e.location&&null!==e.location?url=rtMapsUrl+"?lng="+e.location[0]+"&lat="+e.location[1]+t:void 0!==a.loc&&null!==a.loc&&(url=rtMapsUrl+"?lng="+a.loc[0]+"&lat="+a.loc[1]+t),url}}));let userlocale="",userlocale_state="",userlocale_city="",userlocale_search="",userlocale_label="";void 0!==window.maxGeoJSON&&void 0!==window.maxGeoJSON.city&&void 0!==window.maxGeoJSON.city.names&&window.maxGeoJSON.city.names.en.length&&(userlocale_city=window.maxGeoJSON.city.names.en,userlocale_search=userlocale_city,userlocale_label=userlocale_city),void 0!==window.maxGeoJSON&&void 0!==window.maxGeoJSON.subdivisions&&void 0!==window.maxGeoJSON.subdivisions[0]&&void 0!==window.maxGeoJSON.subdivisions[0].names&&window.maxGeoJSON.subdivisions[0].names.en.length&&(userlocale_state=window.maxGeoJSON.subdivisions[0].names.en,""!==userlocale_search?userlocale_search+=", "+userlocale_state:userlocale_search=userlocale_state,""==userlocale_label&&(userlocale_label=userlocale_state)),void 0!==window.maxGeoJSON&&void 0!==window.maxGeoJSON.country&&void 0!==window.maxGeoJSON.country.iso_code&&window.maxGeoJSON.country.iso_code.length&&(userlocale=window.maxGeoJSON.country.iso_code,""!==userlocale_search&&(userlocale_search+=", "+userlocale)),jQuery((function(e){function a(e){return e<10&&(e="0"+e),e}e(document).ready((function(){let t,o=new Date,i=[a(o.getHours()),a(o.getMinutes()),a(o.getSeconds())];i=+i.join(""),t=i<4e4?4:i<113e3?0:i<14e4?1:i<17e4?2:i<213e3?3:4,e(".mobile-looking:not([data-daypart="+t+"])").remove();rtGlobalObj.rtApi.apiMapsUrl,rtGlobalObj.rtApi.mapsUrl;e.isEmptyObject(window.maxGeoJSON)||e(".mobile-looking").find(".mobile-looking__item").each((function(a){let t=e(this).attr("href"),o="",i=[],s="";void 0!==window.maxGeoJSON.city&&void 0!==window.maxGeoJSON.city.names&&void 0!==window.maxGeoJSON.city.names.en&&window.maxGeoJSON.city.names.en.length&&(i[0]=window.maxGeoJSON.city.names.en),void 0!==window.maxGeoJSON.subdivisions&&void 0!==window.maxGeoJSON.subdivisions[0]&&void 0!==window.maxGeoJSON.subdivisions[0].iso_code&&window.maxGeoJSON.subdivisions[0].iso_code.length&&(i[1]=window.maxGeoJSON.subdivisions[0].iso_code),o+=i.join(", "),i=[o],void 0!==window.maxGeoJSON.country&&void 0!==window.maxGeoJSON.country.iso_code&&window.maxGeoJSON.country.iso_code.length&&(i[2]=window.maxGeoJSON.country.iso_code,o=o+" "+i[2]),s+=window.maxGeoJSON.location.longitude+","+window.maxGeoJSON.location.latitude,t+="&sort_by=popular&location_name="+o+"&location="+s,e(this).attr("href",t)})),e(".mobile-looking__carousel").find("img").each((function(){e(this).attr("src",e(this).data("src"))})),e(".mobile-looking__carousel").length&&(e(".mobile-looking__carousel").on("init",(function(a){e(".mobile-looking").removeClass("hidden")})),e(".mobile-looking__carousel").slick({infinite:!1,slidesToShow:6,slidesToScroll:1,dots:!1,responsive:[{breakpoint:600,settings:{slidesToShow:4}}]})),document.addEventListener("userReady",(function(){e(".mobile-looking__item").on("click",(function(a){let t=Object.assign({},rtGlobalObj.tracking.properties);t.context="home",t.selection=e(this).data("selection"),analytics.track("Concierge Button Clicked",t)}))}))}))}));