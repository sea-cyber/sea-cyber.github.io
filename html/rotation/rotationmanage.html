<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>轮作休耕管理</title>
    <link rel="stylesheet" href="../../theme/default/easyui.css" />
    <link rel="stylesheet" type="text/css" href="../../theme/icon.css" />
    <link rel="stylesheet" type="text/css" href="../../css/app.css" />
    <link rel="stylesheet" type="text/css" href="../../css/main.css" />
    <link rel="stylesheet" type="text/css" href="../../css/icon.css" />
    <link type="text/css" href="../../css/dev.css" rel="stylesheet" />
    <script type="text/javascript" src="../../js/jquery.min.js"></script>
    <script type="text/javascript" src="../../js/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="../../js/easyui-lang-zh_CN.js"></script>
    <script type="text/javascript" src="../../js/linq.min.js"></script>
    <script type="text/javascript" src="../../js/data.util.js"></script>
    <script type="text/javascript" src="../../js/dev.ui.js"></script>
    <script type="text/javascript" src="../../js/guid.js"></script>
    <script type="text/javascript" src="../../js/jquery.dev.control.js"></script>
    <script type="text/javascript">
        var Dev = window.top.window.dev;
        var parent;
        var treeControl, dataGrid;
        var pageIndex = 1, pageSize = 5;
        var orgFilter;
        var dialog, flashDialog;
        var orgids;
        var polygonkeys = [];
        function WidgetCommunication(s) {//部件通讯
            parent = s.parent;
          //  Dev.App.BottomPanel.SetHeight(262);
            Dev.App.BottomPanel.Header.css({ "background": "#14cdad", "color": "#fcfcfc", "font-weight": "bold" });
            Dev.App.BottomPanel.SetIconCls("machine-trackmanage");
            $(window).resize(function () { resize(); });
            initDataGrid();
            inittree();
            resize();
            $(".Button").click(function () {
                var tag = $(this).attr("tag");
                if (tag == "clear") { clear(); bindData(); }
                if (tag == "search") { pageIndex = 1; bindData(); }
                if (tag == "add") add();
                if (tag == "cancel") { if (!Dev.IsNull(verifwin)) verifwin.Close(); }
                if (tag == "save") saveverifdata();
            });
            flashDialog = new Dev.Messager({ Height: 95, Width: 200, AutoShow: false, Type: "question", Timeout: 1500, ButtonVisible: false, AutoVisible: true, Effect: "normal" });
            dialog = new Dev.Messager({ AutoShow: false, Type: "question" });
            parent.one("onClosing", function () {
                Dev.App.BottomPanel.SetHeight(262);
                //  for (var i = 0; i < polygonkeys.length; i++) Dev.App.Map.unByKey(polygonkeys[i]);
                for (var i = 0; i < polygonkeys.length; i++) Dev.MapUtils.removePointKey(polygonkeys[i].key, Dev.App.Map);
                polygonkeys = [];
                if (!Dev.IsNull(treeControl)) {
                    treeControl.unbind("onSelectChanged");
                    treeControl.Clear();
                    treeControl = null;
                }
                if (!Dev.IsNull(dataGrid)) {
                    dataGrid.Target.unbind("onSelectPage");
                    dataGrid.Target.unbind("onClickRow");
                    dataGrid.Target.unbind("onPageSizeChange");
                    dataGrid = null;
                }
                if (!Dev.IsNull(editWin)) {
                    //editWin.unbind("onClosing");
                    editWin.Close();
                }
                if (!Dev.IsNull(verifwin)) {
                    verifwin.unbind("onClosing");
                    verifywinclear();
                    verifwin.Close();
                    verifwin.Destroy();
                    verifwin = null;
                }
                if (!Dev.IsNull(detailwin)) {
                    detailwin.Close();
                    detailwin.Destroy();
                    detailwin = null;
                }
                Dev.MapUtils.ClearFeature("tempGraphicLayer");
            });
            //   $("#uploadtime1").datebox("textbox").attr("placeholder", "合同时间");
        }
        //初始化树
        function inittree() {
            treeControl = $('.dev-tree').prop("$this");
            treeControl.bind("onSelectChanged", function (s, e) {
                clear();
                var treenode = e;
                var isleaf = treeControl.IsLeaf(treenode);
                orgids = [];
                selectorgid = e.id;
                orgids.push(e.id);
                if (!isleaf) {
                    var allchilds = treeControl.GetAllChildren(treenode);
                    for (var i = 0; i < allchilds.length; i++) orgids.push(allchilds[i].id);
                }
                orgFilter = "";
                if (Dev.IsNull(orgids) || orgids.length == 0) return;
                orgFilter = "\"ORGID\"  IN(";
                for (var i = 0; i < orgids.length; i++) orgFilter += "'" + orgids[i] + "',";
                orgFilter = orgFilter.substr(0, orgFilter.length - 1);
                orgFilter += ")";
                bindData();
            });
            var orgid = Dev.cookie.user.orgid;
            $.ajax({
                url: Dev.GetSystemUrlByRelID("Service") + "organize/gettreebyid/" + orgid + "?" + new Date().getTime(),
                type: "Get",
                contentType: 'application/json',
                dataType: 'json',
                success: function (result) {
                    treeData = Dev.ConvertTreeData(result.data, orgid);
                    treeControl.LoadData(treeData);
                    if (treeData.length > 0) treeControl.SetSelectNode(treeControl.GetRoots()[0]);
                }
            });
            bindData();
        }
        //初始化列表控件
        function initDataGrid() {
            if (Dev.IsNull(dataGrid)) {
                var columns = [{
                    field: "name", width: 75, align: 'center', title: '农户名称', sortable: false, formatter: function (value, row, index) {
                        if (Dev.cookie.user.posts[0].postowner == 1 && Dev.cookie.user.posts[0].mainpost == 1) return value;
                        else return Dev.simpleencryp(value, 1, 0);
                    }
                },
                    {
                        field: "cardid", width: 75, align: 'center', title: '身份证号', sortable: false, formatter: function (value, row, index) {
                            if (Dev.cookie.user.posts[0].postowner == 1 && Dev.cookie.user.posts[0].mainpost == 1) return value;
                            else return Dev.simpleencryp(value, 3, 4);
                        }
                    },
                    { field: "subsidy", width: 55, align: 'center', title: '补贴金额(元)', sortable: false },
                    { field: "fallowarea", width: 60, align: 'center', title: '面积(亩)', sortable: false },/*, formatter: function (value, row, index) { return Dev.SqrtMetersToMu(value, 3);}*/
                    {
                        field: "address", width: 150, align: 'center', title: '地址', sortable: false, formatter: function (value, row, index) {
                            var str = "";
                            if (!Dev.IsNull(row.province) && row.province != "undefined") str += row.province;
                            if (!Dev.IsNull(row.city) && row.city != "undefined") str += row.city;
                            if (!Dev.IsNull(row.county) && row.county != "undefined") str += row.county;
                            if (!Dev.IsNull(row.town) && row.town != "undefined") str += row.town;
                            if (!Dev.IsNull(row.village) && row.village != "undefined") str += row.village;
                            return str;
                        }
                    },
                    {
                        field: "contractstarttime", width: 80, align: 'center', title: '合同签订日期', sortable: false, formatter: function (value, row, index) {
                            return Dev.GetDateString(value, true);
                        }
                    },
                    { field: "contractendtime", width: 80, align: 'center', title: '合同失效日期', sortable: false, formatter: function (value, row, index) { return Dev.GetDateString(value, true); } },
                    {
                        field: "_oprate", width: 100, align: 'center', title: '操作', sortable: false, formatter: function (value, row, index) {
                            str="";
                            if (!Dev.IsNull(row.name) && !Dev.IsNull(row.cardid)) {
                                str = '<a href="javascript:void(0)" style="color:blue;" onclick="verify(\'' + row.id + '\',\'' + index + '\')" title="核实"><img src="../../image/agri/verify1.png"/></a>';
                                str += '<a href="javascript:void(0)" style="color:blue;margin-left:6px;" onclick="inspect(\'' + row.id + '\',\'' + index + '\')" title="核查"><img src="../../image/agri/inspect1.png"/></a>';
                                str += '<a href="javascript:void(0)" style="color:blue;margin-left:6px;" onclick="update(\'' + row.id + '\',\'' + index + '\')" title="修改"><img src="../../image/agri/update.png"/></a>';
                            }
                            str += '<a href="javascript:void(0)" style="color:blue;margin-left:6px;" onclick="showdetail(\'' + row.id + '\',\'' + index + '\')" title="详细信息"><img src="../../image/agri/cartype.png"/></a>';
                            str += '<a href="javascript:void(0)" style="color:blue;margin-left:6px;" onclick="deleteinfo(\'' + row.id + '\')" title="删除"><img src="../../image/agri/delete.png"/></a>';
                            return str;
                        }
                    }
                ];
                dataGrid = new UCDataGrid(Dev, {
                    PageIndex: pageIndex, PageSize: pageSize, RowNumbers: false, ID: "rotationGrid", pagequery: false, IsSizeSelect: true
                });
                $("#gridDiv").append(dataGrid.Target);
                dataGrid.Layout(columns);
                dataGrid.Target.bind("onSelectPage", function (s, e) {
                    pageIndex = e.index;
                    bindData();
                });
                dataGrid.Target.bind("onClickRow", function (s, e) {
                    $.ajax({
                        url: Dev.GetSystemUrlByRelID("Service") + "massif/find/rotation",
                        type: "POST",
                        contentType: 'application/json',
                        dataType: 'json',
                        data: e.Row.id,
                        success: function (result) {
                            if (result.statusCode != 200 || result.data.length == 0) return;
                            for (var i = 0; i < polygonkeys.length; i++) Dev.MapUtils.removePointKey(polygonkeys[i].key, Dev.App.Map);
                            polygonkeys = [];
                            var resultdata = [];
                            for (var i = 0; i < result.data.length; i++) {
                                result.data[i].geom = Dev.ConvertGeomByWKT(result.data[i].geom);
                                var c_feature = new Dev.Feature(result.data[i].geom);
                                //var mapproj = Dev.App.Map.getView().getProjection();
                                //if (mapproj.getCode() != Dev.App.Config.SystemMap.DataEPSG) c_feature.getGeometry().transform(Dev.App.Config.SystemMap.DataEPSG, mapproj.getCode());
                                c_feature.setProperties(result.data[i]);
                                resultdata.push(c_feature);
                                c_feature.setId(result.data[i].id);
                                var curr_polygonkey = Dev.MapUtils.LineSymbolStyle(c_feature, Dev.App.Map);
                                polygonkeys.push({ key: result.data[i].id, polygonkey: curr_polygonkey });
                            }

                            var cextent = Dev.getExtentByFeatures(resultdata);
                            var c_point = [(cextent[0] + cextent[2]) / 2, (cextent[1] + cextent[3]) / 2];
                            var mapproj = Dev.App.Map.getView().getProjection();
                            if (mapproj.getCode() != Dev.App.Config.SystemMap.DataEPSG) c_point = Dev.proj.transform(c_point, Dev.App.Config.SystemMap.DataEPSG, mapproj.getCode());
                        
                            Dev.App.Map.getView().setZoom(16);
                            Dev.App.Map.getView().centerOn(c_point, Dev.App.Map.getSize(), [Dev.App.Map.getSize()[0] / 2, Dev.App.Map.getSize()[1] / 2]);
                        }
                    });
                });
                dataGrid.Target.bind("onPageSizeChange", function (s, e) {
                    if (Dev.IsNull(e)) return;
                    pageIndex = 1;
                    pageSize = e;
                    bindData();
                });
            }
        }
        //获取数据
        function bindData() {
            for (var i = 0; i < polygonkeys.length; i++) Dev.MapUtils.removePointKey(polygonkeys[i].key, Dev.App.Map);
            polygonkeys = [];
            Dev.MapUtils.ClearFeature("tempGraphicLayer");
            $.ajax({
                url: Dev.GetSystemUrlByRelID("Service") + "rotationfalloview/getbyfilter/" + pageIndex + "/" + pageSize,
                type: "POST",
                contentType: 'application/json',
                dataType: 'json',
                data: getcondition(),
                success: function (result) {
                    if (result.statusCode != 200 || Dev.IsNull(result.data)) { dataGrid.Load([], { totalCount: 0, pageIndex: pageIndex, pageSize: pageSize, pageCount: 0 }); return; }
                    dataGrid.Load(result.data.dataSource, result.data.pageInfo);
                },
                error: function (msg) {
                }
            });
        }
        //新增
        var editWin;
        var updateid;
        var updateinfo;
        function add() {
            updateid = null;
            if (!updateinfo) {
                updateinfo = true;
                initwin();
            }
            showmodal(true);
        }
        //修改
        function update(id, index) {
            if (Dev.IsNull(id)) return;
            updateid = id;
            //根据ID查询数据
            dataGrid.DataGrid.datagrid("selectRow", index);
            if (!updateinfo) { updateinfo = true; initwin(); }
            showmodal(true);
        }
        function initwin() {
            for (var i = 0; i < polygonkeys.length; i++) Dev.MapUtils.removePointKey(polygonkeys[i].key, Dev.App.Map);
            polygonkeys = [];
            var title = "轮作休耕新增";
            if (!Dev.IsNull(updateid)) title = "轮作休耕修改";
            editWin = new Dev.Window({
                ID: "rotationWin",
                IconCls: 'icon-featureupdate',
                Title: title,
                Parent: Dev.App.FillPanel.Target,
                Maximizable: false,
                Modal: false,
                Draggable: true,
                HAlign: 'center',
                VAlign: 'center',
                Resizable: false,
                Url: Dev.App.Root + "html/rotation/rotationedit.html",
                Height: 542,
                Width: 702,
                Parameters: { orglist: treeControl.GetSelectNode()[0].$this, orgFilter: orgFilter, updateid: updateid }
            });
            editWin.one("onClosing", function () {
                editWin.clear();
                updateinfo = false;
                showmodal(false);
                setTimeout(function () {
                    editWin.Destroy();
                    editWin = null;
                    bindData();
                }, 500);
            });
        }
        //删除
        function deleteinfo(id) {
            if (Dev.IsNull(id)) return null;
            dialog.Confirm('确定删除所选记录吗？', function (r) {
                if (!r) return;
                $.ajax({
                    type: "POST",
                    contentType: "application/json",
                    data: id,
                    url: Dev.GetSystemUrlByRelID("Service") + "rotationfallow/" + "deletero",
                    success: function (re) {
                        if (!re.statusCode == 200) { flashDialog.Alert("删除失败！", "info"); return; };
                        flashDialog.Alert("删除成功！", "info");
                        bindData();
                    },
                    error: function (msg) {
                        flashDialog.Alert("删除失败！", "info");
                    }
                });
            });
        }
        //详细信息
        var detailwin;
        function showdetail(id, index) {
            if (Dev.IsNull(id)) return;
            //获取当前行
            dataGrid.DataGrid.datagrid("selectRow", index);
            var selectRowData = dataGrid.DataGrid.datagrid("getSelected");
            if (Dev.IsNull(selectRowData)) return;
            if (!Dev.IsNull(detailwin)) { detailwin.Close(); detailwin.Destroy(); detailwin = null; showmodal(false); }
            detailwin = new Dev.Window({
                ID: "rotationDetailWin",
                IconCls: 'icon-detailinfo',
                Title: "详细信息",
                Parent: Dev.App.FillPanel.Target,
                Maximizable: false,
                Modal: false,
                Draggable: true,
                HAlign: 'center',
                VAlign: 'center',
                Resizable: false,
                Url: Dev.App.Root + "html/rotation/rotationdetail.html",
                Height: 577,
                Width: 702,
                Parameters: { rotationid: id, showdata: selectRowData }
            });
            detailwin.one("onClosing", function () { showmodal(false); });
            showmodal(true);
        }
        //核实
        var verifwin, rotation_id;
        function verify(id, index) { initverifywin(id, "verify"); }
        //核查
        function inspect(id, index) { initverifywin(id, "inspect"); }
        function initverifywin(id, type) {
            rotation_id = id;
            var title = (type == "verify" ? "核实任务下发" : "核查任务下发");
            var icon = (type == "verify" ? "icon-verify" : "icon-inspect");
            if (Dev.IsNull(verifwin)) {
                verifwin = new Dev.Window({
                    ID: "verifWin",
                    IconCls: icon,
                    Title: title,
                    Parent: Dev.App.FillPanel.Target,
                    Maximizable: false,
                    Modal: false,
                    Draggable: true,
                    HAlign: 'center',
                    VAlign: 'center',
                    Resizable: false,
                    Content: $(".TaskWorkEdit"),
                    Height: type == "verify" ? 327 : 363,
                    Width: 530
                });
                //初始化数据
                initmassif();
                initorg();
                bindPlanCropDate();//绑定种植日期事件
                $("#compectBTime", verifwin.Target).datetimebox({ width: 184, height: 26 });
                verifwin.bind("onClosing", function () {
                    verifwin.Target.removeAttr("type");
                    verifywinclear();
                    showmodal(false);
                });
            }
            else {
                verifwin.SetHeight(type == "verify" ? 327 : 363);
                verifwin.SetTitle(title);
                verifwin.SetIconCls(icon);
                verifwin.Open();
            }
            $(".Row[tag='inspect']", $(".TaskWorkEdit", Dev.App.FillPanel.Target))[0].style.display = (type == "verify" ? "none" : "block");
            //默认选择第一个根节点
            if (!Dev.IsNull(orgcontrol)) {
                var orglist = treeControl.GetSelectNode()[0].$this;
                orgcontrol.SetData(orglist);
            }
            verifwin.Target.attr("type", type);
            getmassinfdata(id);
            showmodal(true);
        }
        //核实核查信息保存
        function saveverifdata() {
            if (Dev.IsNull(rotation_id)) return;
            //获取地块
            var model = {}
            var blockinfo = massifcontrol.combogrid("grid").datagrid("getSelected");
        //    var massifid = massifcontrol.combogrid("getValue");
            if (Dev.IsNull(blockinfo) || Dev.IsNull(blockinfo.massifid)) { $("#errormsg", verifwin.Target).html("请选择地块！"); return; }
            model.massifid = blockinfo.massifid;
            model.orgid = orgcontrol.GetValue();
            model.type = verifwin.Target.attr("type") == "verify" ? "核实任务" : "核查任务";
            if (model.type == "核查任务") {
                var plancropdateControl = $(".dev-combobox[name='plancropdate']", $(".TaskWorkEdit", Dev.App.FillPanel.Target)).prop("$this");
                if (Dev.IsNull(plancropdateControl.GetText())) { $("#errormsg", verifwin.Target).html("请选择种植日期！"); return; }
                model.plancropdate = plancropdateControl.GetText();
                var plancropControl = $(".dev-textbox[name='plancrop']", $(".TaskWorkEdit", Dev.App.FillPanel.Target)).prop("$this");
                if (Dev.IsNull(plancropControl.GetValue())) { $("#errormsg", verifwin.Target).html("种植作物为空！"); return; }
                model.plancrop = plancropControl.GetValue();
            }
            //选择用户
            if (!Dev.IsNull(usercombogrid)) {
                var uservalue = usercombogrid.combogrid("getValue");
                if (Dev.IsNull(uservalue)) { $("#errormsg", verifwin.Target).html("请选择任务接收人!"); return; }
                model.receiveder = uservalue;
            }
            var defualtcontrol = $('div[tag="inputcontrol"]', verifwin.Target);
            for (var i = 0; i < defualtcontrol.length; i++) {
                var currcontrol = $(defualtcontrol[i]).prop("$this");
                var name = $(defualtcontrol[i]).attr("name");
                var byname = $(defualtcontrol[i]).attr("byname");
                var value = currcontrol.GetValue();
                if ((Dev.IsNull(value) || Dev.IsNull(value.trim())) && currcontrol.Required) { $("#errormsg", verifwin.Target).html("请" + ($(defualtcontrol[i]).hasClass("dev-combobox") ? "选择" : "输入") + byname + "！"); return; }
                model[name] = value;
            }
            var compectBTime = $("#compectBTime", verifwin.Target).datetimebox("getValue");
            if (Dev.IsNull(compectBTime)) { $("#errormsg", verifwin.Target).html("请选择完成期限!"); return; }
            if (new Date(compectBTime.replace(/-/g, '/')).getTime() <= new Date().getTime()) { $("#errormsg", verifwin.Target).html("完成期限不能小于当前时间!"); return; }
                model.completeterm = new Date(compectBTime.replace(/-/g, "/")).getTime();
            //获取当前行
            var alldata = dataGrid.DataGrid.datagrid("getData").rows;
            var currdata = Enumerable.From(alldata).Where('s=>s.id=="' + rotation_id + '"').FirstOrDefault();
            model.regionsid = currdata.regionsid; model.province = blockinfo.province;
            model.city = blockinfo.city; model.county = blockinfo.county;
            model.town = blockinfo.town; model.village = blockinfo.village;
            model.rotationfallowid = rotation_id;
            model.state = 0;
            $.ajax({
                url: Dev.GetSystemUrlByRelID("Service") + "inspect/addinspect",
                type: "POST",
                contentType: 'application/json',
                dataType: 'json',
                data: JSON.stringify(model),
                success: function (result) {
                    verifwin.Close();
                    flashDialog.Alert("保存成功！", "success");
                },
                error: function () {
                    flashDialog.Alert("网络异常，保存失败！", "error");
                }
            });
        }
        //初始化地块
        var massifcontrol, massifpageIndex = 1, massifpagesize = 5;
        function initmassif() {
            if (Dev.IsNull(verifwin)) return;
            massifcontrol = $("#massifs", verifwin.Target);
            massifcontrol.combogrid({
                idField: 'massifid',
                textField: 'massifid',
                columns: [[
                  { field: "massifid", width: 100, align: 'center', title: '地块编号', sortable: false },
                   { field: "classname", width: 80, align: 'center', title: '地类名称', sortable: false },
                   { field: "ownership", width: 100, align: 'center', title: '权属性质', sortable: false },
                   { field: "farmlandtype", width: 80, align: 'center', title: '基本农田类型', sortable: false },
                   { field: "farmlandarea", width: 80, align: 'center', title: '基本农田面积', sortable: false },

                ]],
                width: 184,
                height: 26,
                panelWidth: 445,
                panelHeight: 221,
                pagination: true,
                toolbar: $("#toolbarland"),
                onChange: function (newValue, oldValue) {
                    var plancropdateControl = $(".dev-combobox[name='plancropdate']", $(".TaskWorkEdit", Dev.App.FillPanel.Target)).prop("$this");
                    plancropdateControl.Clear();
                    var plancropControl = $(".dev-textbox[name='plancrop']", $(".TaskWorkEdit", Dev.App.FillPanel.Target)).prop("$this");
                    plancropControl.Clear();
                    var massifid = newValue;
                    getPlancropdate(rotation_id, massifid);
                }
            });
            var machinepage = massifcontrol.combogrid("grid").datagrid("getPager");
            var parampage = {
                showPageList: false,
                showRefresh: false,
                pageNumber: massifpageIndex,
                pageSize: massifpagesize,
                onSelectPage: function (index, size) {
                    massifpageIndex = index;
                    getmassinfdata(rotation_id);
                }
            };
            machinepage.pagination(parampage);
            loadmassiftoolbar();
        }
        function loadmassiftoolbar() {
            var dicdatas = Dev.GetDicData(["LandName", "Ownership"]);
            var classnameType = Enumerable.From(dicdatas).Where('s=>s.type=="LandName"').ToArray();
            var ownershipType = Enumerable.From(dicdatas).Where('s=>s.type=="Ownership"').ToArray();
            classnameType.unshift({ data: "不限", id: 9999999999 });
            ownershipType.unshift({ data: "不限", id: 9999999999 });
            var c_panel = massifcontrol.combogrid("panel");
            $('#landtypeSearch', c_panel).prop("$this").SetData(classnameType);
            $('#landattrSearch', c_panel).prop("$this").SetData(ownershipType);
            $("#landsearch", c_panel).click(function () { getmassinfdata(rotation_id); });
            $("#landreset", massifcontrol.combogrid("panel")).click(function () { massifsearchclear(); getmassinfdata(rotation_id); });
        }
        function getmassifcondition() {
            var con = {};
            var c_panel = massifcontrol.combogrid("panel");
            var bid = $("#landnoSearch", c_panel).prop("$this").GetValue();
            if (!Dev.IsNull(bid)) con.massifid = bid;
            var blocktype = $('#landtypeSearch', c_panel).prop("$this").GetText();
            if (!Dev.IsNull(blocktype) && blocktype != "不限") con.classname = blocktype;
            var ownertype = $('#landattrSearch', c_panel).prop("$this").GetText();
            if (!Dev.IsNull(ownertype) && ownertype != "不限") con.ownership = ownertype;
            return con;
        }
        function massifsearchclear() {
            var c_panel = massifcontrol.combogrid("panel");
            $("#landnoSearch", c_panel).prop("$this").Clear();
            $('#landtypeSearch', c_panel).prop("$this").SetValue("");
            $('#landattrSearch', c_panel).prop("$this").SetValue("");
        }

        function getmassinfdata(rotationid) {
            if (Dev.IsNull(rotationid)) return;
            $.ajax({
                url: Dev.GetSystemUrlByRelID("Service") + "massif/findbyrotationfallid/" + rotationid + "/" + massifpageIndex + "/" + massifpagesize,
                type: "POST",
                data: JSON.stringify(getmassifcondition()),
                contentType: 'application/json',
                success: function (result) {
                    if (result.statusCode != 200 || Dev.IsNull(result.data)) {
                        massifcontrol.combogrid("grid").datagrid("loadData", []);
                        var page = massifcontrol.combogrid("grid").datagrid("getPager");
                        page.pagination('refresh', { total: 0, pageNumber: 0 }); return;
                    }
                    massifcontrol.combogrid("grid").datagrid("loadData", result.data.dataSource);
                    var page = massifcontrol.combogrid("grid").datagrid("getPager");
                    page.pagination('refresh', { total: result.data.pageInfo.totalCount, pageNumber: result.data.pageInfo.pageIndex });
                },
                error: function (msg) {
                    var k = "";
                }
            });
        }
        //初始化组织机构
        var orgcontrol;
        function initorg() {
            if (Dev.IsNull(orgcontrol)) {
                orgcontrol = new Dev.Combotree({
                    Required: true, PopupHeight: 120, TipInfo: "请选择",
                    MultiSelect: false, StateField: "State", ValueField: "id",
                    TextField: "name", ChildrenField: "child", Height: 26, Border: "1px", Width: 184, Padding: "0px 5px"
                });
                $("#orgcombotree", verifwin.Target).append(orgcontrol.Target);
                orgcontrol.Layout();
                orgcontrol.bind("onSelectChanged", function (n, e) {
                    var isleaf = orgcontrol.tree.IsLeaf(e);
                    orgids = [e.id];
                    if (!isleaf) {
                        var allchilds = orgcontrol.tree.GetAllChildren(e);
                        for (var i = 0; i < allchilds.length; i++) orgids.push(allchilds[i].id);
                    }
                    getuserbyorgids(orgids);
                });
            }
            //var orglist = treeControl.GetSelectNode()[0].$this;
            //orgcontrol.SetData(orglist);
        }
        //通过种植类型查询
        function bindPlanCropDate() {
            var plancropdateControl = $(".dev-combobox[name='plancropdate']", $(".TaskWorkEdit", Dev.App.FillPanel.Target)).prop("$this");
            plancropdateControl.bind("onSelectChanged", function (e, node) {
                var plancropControl = $(".dev-textbox[name='plancrop']", $(".TaskWorkEdit", Dev.App.FillPanel.Target)).prop("$this");
                plancropControl.SetValue(node.type);

            })
        }
        //获取计划种植日期
        function getPlancropdate(rotationfallowid, massifid, plancropdate) {
            var con = " 1=1";
            if (!Dev.IsNull(rotationfallowid)) { con += " AND \"ROTATIONFALLID\" = '" + rotationfallowid + "'"; }
            if (!Dev.IsNull(massifid)) { con += " AND \"MASSIFID\" = '" + massifid + "'"; }
            var url = Dev.GetSystemUrlByRelID("Service") + "rule/getRuleNoInspect/" + rotationfallowid + "/" + massifid;
            $.ajax({
                url: url,
                type: "GET",
                contentType: 'application/json',
                success: function (result) {
                    if (result.statusCode != 200 || Dev.IsNull(result.data)) return;
                    var data = result.data;
                    for (var i = 0; i < data.length; i++) {
                        var plancropdate = data[i].year;
                        var text = plancropdate;
                        if (!Dev.IsNullAll(data[i].mouth)) { plancropdate += "-" + data[i].mouth; }
                        if (!Dev.IsNullAll(data[i].mouth)) { text += "-" + data[i].mouth; }
                        data[i].plancropdate = plancropdate;
                        data[i].text = text;
                    }
                    var plancropdateControl = $(".dev-combobox[name='plancropdate']", $(".TaskWorkEdit", Dev.App.FillPanel.Target)).prop("$this");
                    plancropdateControl.SetData([]);
                    plancropdateControl.SetData(data);
                    // if (!Dev.IsNull(plancropdate)) { plancropdateControl.SetText(plancropdate); }
                }
            });
        }

        //辅助函数
        var usercombogrid;
        function inituser() {
            if (Dev.IsNull(verifwin)) return;
            usercombogrid = $("#usercombogrid", verifwin.Target);
            usercombogrid.combogrid({
                idField: 'id',
                textField: 'truename',
                columns: [[
                { field: "truename", width: 100, align: 'center', title: '真实姓名', sortable: false },
                 { field: "name", width: 100, align: 'center', title: '登录名', sortable: false },
                 { field: "phone", width: 120, align: 'center', title: '电话号码', sortable: false },
                 { field: "email", width: 120, align: 'center', title: '电子邮件', sortable: false }
                ]],
                width: 184,
                height: 26,
                panelWidth: 445,
                panelHeight: 190,
                pagination: false,
                toolbar: $("#toolbarland1")
            });

            $("#landsearch1", usercombogrid.combogrid("panel")).click(function () {
                var name = $('#landnoSearch1', usercombogrid.combogrid("panel")).prop("$this").GetValue();
                var phone = $('#landtypeSearch1', usercombogrid.combogrid("panel")).prop("$this").GetValue();
                var no = $('#landattrSearch1', usercombogrid.combogrid("panel")).prop("$this").GetValue();
                if (Dev.IsNull(orgids)) return;
                $.ajax({
                    url: Dev.GetSystemUrlByRelID("Service") + "user/finduserbyorgids",
                    type: "POST",
                    contentType: 'application/json',
                    dataType: 'json',
                    async: false,
                    data: JSON.stringify(orgids),
                    success: function (result) {
                        if (result.statusCode != 200) return;
                        if (Dev.IsNull(usercombogrid)) inituser();
                        usercombogrid.combogrid("setValue", "");
                        var resultData = Enumerable.From(result.data).Where('s=>s.name.indexOf("' + name + '") > -1 ' +
                            '&& s.phone.indexOf("' + phone + '") > -1 && s.no.indexOf("' + no + '") > -1').ToArray();
                        usercombogrid.combogrid("grid").datagrid("loadData", resultData);
                    }
                });
            });
            $("#landreset1", usercombogrid.combogrid("panel")).click(function () {
                var nameControl = $('#landnoSearch1', usercombogrid.combogrid("panel")).prop("$this");
                var phoneControl = $('#landtypeSearch1', usercombogrid.combogrid("panel")).prop("$this");
                var noControl = $('#landattrSearch1', usercombogrid.combogrid("panel")).prop("$this");
                if (!Dev.IsNull(nameControl)) nameControl.Clear();
                if (!Dev.IsNull(phoneControl)) phoneControl.Clear();
                if (!Dev.IsNull(noControl)) noControl.Clear();
                getuserbyorgids(orgids);
            });
        }

        function getuserbyorgids(orgids) {
            if (Dev.IsNull(orgids)) return;
            $.ajax({
                url: Dev.GetSystemUrlByRelID("Service") + "user/finduserbyorgids",
                type: "POST",
                contentType: 'application/json',
                dataType: 'json',
                async: false,
                data: JSON.stringify(orgids),
                success: function (result) {
                    if (result.statusCode != 200) return;
                    if (Dev.IsNull(result.data)) result.data = [];
                  // var tempdata = Enumerable.From(result.data).Where('s=>s.id!="' + Dev.cookie.user.id + '"').ToArray();
                    if (Dev.IsNull(usercombogrid)) inituser();
                    usercombogrid.combogrid("setValue", "");
                    usercombogrid.combogrid("grid").datagrid("loadData", result.data);
                }
            });
        }
        function resize() {
           // Dev.App.BottomPanel.SetHeight(262);
            var height = $(window).outerHeight();
            treeControl.SetHeight(height == 0 ? (262 - 26) : (height - 26));

            var gridheight = height - 40;
            var gridwidth = parseInt($(window).width() * 0.80) - 2;
            if (gridwidth < 1230) {
                gridwidth = 1230;
                gridheight = parseInt(gridheight) - 16;
            }
            $("#gridDiv").height(gridheight).width(gridwidth);
            if (!Dev.IsNull(dataGrid)) dataGrid.Resize(gridwidth, gridheight);
        }
        function getcondition() {
            var con = "1=1";
            //用户名
            var farmername = $("#farmername").prop("$this").GetValue().trim();
            if (!Dev.IsNull(farmername)) con += " AND \"NAME\" LIKE '%" + farmername + "%'";
            //农户身份证号(服务)
            var farmervalue = $("#framernum").prop("$this").GetValue().trim();
            if (!Dev.IsNull(farmervalue)) con += " AND \"CARDID\" LIKE '%" + farmervalue + "%'";
            var addressvalue = $('#address').prop("$this").GetValue().trim();
            if (!Dev.IsNull(addressvalue)) con += "AND (\"PROVINCE\" LIKE '%" + addressvalue + "%' OR \"CITY\" LIKE'%" + addressvalue + "%' OR \"COUNTY\" LIKE '%" + addressvalue + "%' OR \"TOWN\" LIKE '%" + addressvalue + "%' OR \"VILLAGE\" LIKE '%" + addressvalue + "%')";
            //添加时间
            var time1 = $("#uploadtime1").datebox("getValue");
            var time2 = $("#uploadtime2").datebox("getValue");
            if (!Dev.IsNull(time1) && !Dev.IsNull(time2)) {
                var t1 = new Date(time1.replace(/-/g, "/"));
                var t2 = new Date(time2.replace(/-/g, "/"));
                if (t1.getTime() > t2.getTime()) {
                    var temp = time1;
                    time1 = time2;
                    time2 = temp;
                }
            }
            if (!Dev.IsNull(time1)) con += " AND \"CONTRACTSTARTTIME\">='" + time1 + " 00:00:00'";
            if (!Dev.IsNull(time2)) con += " AND \"CONTRACTSTARTTIME\"<='" + time2 + " 23:59:59'";
            if (!dev.IsNull(orgFilter)) con += " AND  " + orgFilter;
            //根据时间
            con += " ORDER BY  \"CREATEDATE\" DESC";
            return con;
        }
        function verifywinclear() {
            $("#errormsg", verifwin.Target).html("");
            massifcontrol.combogrid("setValue", "");
            massifcontrol.combogrid("hidePanel");
            var defualtcontrol = $('div[tag="inputcontrol"]', verifwin.Target);
            for (var i = 0; i < defualtcontrol.length; i++) {
                var currcontrol = $(defualtcontrol[i]).prop("$this");
                if ($(defualtcontrol[i]).hasClass("dev-combobox")) currcontrol.SetValue("");
                if ($(defualtcontrol[i]).hasClass("dev-textbox")) currcontrol.Clear();
            }
            $("#compectBTime", verifwin.Target).datetimebox("setValue", "");
            $("#compectBTime", verifwin.Target).datetimebox("hidePanel");
            $("#usercombogrid", verifwin.Target).combogrid("setValue", "");
            $("#usercombogrid", verifwin.Target).combogrid("hidePanel");

        }
        function clear() {
            pageIndex = 1;
            var framernum = $("#framernum").prop("$this");
            var address = $("#address").prop("$this");
            var farmername = $("#farmername").prop("$this");
            if (!Dev.IsNull(farmername)) farmername.SetValue("");
            if (!Dev.IsNull(framernum)) framernum.Clear();
            if (!Dev.IsNull(address)) address.SetValue("");
            $("#uploadtime1").datebox("setValue", "");
            $("#uploadtime2").datebox("setValue", "");
        }
        //显示遮罩
        function showmodal(isshow) {
            if (Dev.IsNull(isshow)) return;
            $("#shade").css("display", (isshow ? "block" : "none"));
        }
    </script>
    <style type="text/css">
        .content {
            height: 100%;
            width: 100%;
            position: relative;
        }

        .Title {
            width: 75px;
            text-align: right;
            line-height: 40px;
            height: 38px;
            display: inline-block;
            float: left;
        }

            .Title .Icon {
                width: 16px;
                height: 16px;
                display: inline-block;
                margin-top: 11px;
            }

            .Title .Text {
                display: inline-block;
                float: right;
                /*width: 49px;*/
            }

        .content .SearchDiv {
            width: 210px;
            height: 40px;
            display: inline-block;
            margin-left: 0px;
            margin-right: 0px;
            float: left;
        }

        .Button {
            width: 70px;
            height: 26px;
            float: left;
            margin-top: 7px;
            background-color: #16dbbb;
            /*border-radius: 5px;*/
            text-align: center;
            border: 1px solid #16dbbb;
            display: inline-block;
            margin-left: 5px;
        }

            .Button:hover {
                background-color: #5227de;
                border: 1px solid #5227de;
                cursor: pointer;
            }

           .Button:active {
                background-color: #210097;
                border: 1px solid #210097;
                cursor: pointer;
            }

        .ButtonDisable {
            background-color: #808080;
            color: #000;
            border: 1px solid #808080;
        }

            .ButtonDisable:hover {
                background-color: #808080;
                color: #000;
                border: 1px solid #808080;
            }

        .datagrid-row {
            height: 28px;
        }
    </style>
</head>
<body>
    <div id="shade" style="width: 100%; height: 100%; position: absolute; z-index: 10; display: none; background: rgba(255,255,255,0.3)"></div>
    <div class="content">
        <div style="height: 100%; width: 20%; position: absolute;">
            <!--  <div style="height: 26px; line-height: 26px; width: 100%; background-color: #ddd;">
                <span style="margin-left: 15px; color: #0099cc; line-height: 26px; letter-spacing: 3px; font-size: 12px;">组织机构</span>
            </div>-->
            <div id="treediv" style="width: 100%; height: 100%;">
                <div class="dev-tree" opt='{"ValueField":"id","TextField":"name","ChildrenField":"child","Height":220}'>
                </div>
            </div>
        </div>
        <div style="height: 100%; width: 80%; position: absolute; left: 20%; overflow: auto; overflow: auto;">
            <div id="searchDiv" style="height: 38px; border-left: 1px solid #ddd; position: relative; min-width: 1230px;">
                <div style="height: 38px; position: absolute; left: 0px;">
                    <div class="SearchDiv" >
                          <div id="farmername" class="dev-textbox" style="z-index: 2; width: 200px; display: inline-block;" opt='{"TipInfo":"","HeaderCSS":{"padding":"0px","width":"75px"},"IsOverShow":true,"Padding":"0px 5px","TextAlign":"left","BodyCSS": { "background-color": "transparent","margin-top":"8px","margin-left":"5px" },"Title":"<div class=\"Title\"><div class=\"Icon machine-name\" style=\"float:left;margin-left:3px\"></div><span class=\"Text\" style=\"width:50px\">农户姓名</span></div>"}'>
                        </div>
                    </div>
                    <div class="SearchDiv">
                        <div id="framernum" class="dev-textbox" style="z-index: 2; width: 200px; display: inline-block;"
                            opt='{"TipInfo":"","HeaderCSS":{"padding":"0px","width":"75px"},"IsOverShow":true,"Padding":"0px 5px","TextAlign":"left","BodyCSS": { "background-color": "transparent","margin-top":"8px","margin-left":"5px" },"Title":"<div class=\"Title\"><div class=\"Icon machine-carnum\"></div><span class=\"Text\" style=\"width:50px\">身份证号</span></div>"}'>
                        </div>
                    </div>
                    <div class="SearchDiv">
                        <div id="address" class="dev-textbox" style="z-index: 2; width: 200px; display: inline-block;" opt='{"TipInfo":"","HeaderCSS":{"padding":"0px","width":"75px"},"IsOverShow":true,"Padding":"0px 5px","TextAlign":"left","BodyCSS": { "background-color": "transparent","margin-top":"8px","margin-left":"5px" },"Title":"<div class=\"Title\"><div class=\"Icon machine-name\" style=\"float:left;margin-left:3px\"></div><span class=\"Text\" style=\"width:50px\">详细地址</span></div>"}'>
                        </div>
                    </div>
                    <div class="SearchDiv" style="width: 209px;">
                        <div style="width: 75px; height: 38px; line-height: 38px; text-align: right; display: inline-block; float: left;">
                            <div class="icon-calendar"
                                style="height: 16px; width: 16px; display: inline-block; float: left; margin-left: 5px; margin-top: 11px;">
                            </div>
                            <span style="height: 40px; line-height: 40px; width: 49px; float: right;">签订日期</span>
                        </div>
                        <div style="width: 120px; height: 40px; line-height: 38px; padding: 0px 5px; display: inline-block; float: left; margin-top: 0px; margin-left: 3px">
                            <input id="uploadtime1" class="easyui-datebox" data-options="width:120,height:24,editable:false" placeholder="合同时间" />
                        </div>
                    </div>
                    <div class="SearchDiv">
                        <div style="width: 16px; height: 38px; display: inline-block; line-height: 40px; text-align: center; float: left;">
                            至
                        </div>
                        <div style="width: 120px; height: 38px; line-height: 38px; padding: 0px 5px; display: inline-block; float: left; margin-top: 0px;">
                            <input id="uploadtime2" class="easyui-datebox"
                                data-options="editable:false,width:120,height:24" />
                        </div>
                    </div>
                </div>
                <div style="width: 240px; height: 100%; position: absolute; right: 10px; z-index: 2; bottom: 2px">
                    <div class="Button" tag="search">
                        <div class="machine-query"
                            style="height: 16px; width: 16px; margin-top: 4px; margin-left: 4px; display: inline-block; float: left;">
                        </div>
                        <span style="line-height: 26px; color: #fcfcfc;">查&nbsp;询</span>
                    </div>
                    <div class="Button" tag="clear">
                        <div class="machine-reset"
                            style="height: 16px; width: 16px; margin-top: 4px; margin-left: 4px; display: inline-block; float: left;">
                        </div>
                        <span style="line-height: 26px; color: #fcfcfc;">重&nbsp;置</span>
                    </div>
                    <div class="Button" tag="add">
                        <div class="machine-add"
                            style="height: 16px; width: 16px; margin-top: 4px; margin-left: 4px; display: inline-block; float: left;">
                        </div>
                        <span style="line-height: 26px; color: #fcfcfc;">新&nbsp;增</span>
                    </div>
                </div>
            </div>
            <div id="gridDiv" style="border-left: 1px solid #ddd; border-top: 1px solid #ddd;"></div>
        </div>
    </div>
    <div class="TaskWorkEdit" style="width: 528px;">
        <div class="Row">
            <div class="Cell" style="width: 259px;">
                <div style="display: inline-block; width: 67px; line-height: 35px; float: left; text-align: right; padding-right: 8px;"><span>地块</span></div>
                <div style="width: 184px; height: 35px; line-height: 35px; display: inline-block; float: left; margin-top: 0px; position: relative;">
                    <div id="massifs" data-options="editable:false" style="position: absolute; top: 5px;"></div>
                    <div style="position: absolute; height: 10px; width: 10px; top: 12px; right: 20px; color: red; line-height: 10px;">*</div>
                </div>
            </div>
            <div class="Cell" style="width: 259px;">
                <div style="display: inline-block; width: 67px; line-height: 35px; float: left; text-align: right; padding-right: 8px;"><span>组织机构</span></div>
                <div id="orgcombotree" style="width: 184px; height: 35px; line-height: 33px; display: inline-block; float: left; margin-top: 5px;">
                </div>
            </div>
        </div>
        <div class="Row" style="display: none" tag="inspect">
            <div class="Cell" style="width: 259px;">
                <div class="dev-combobox" name="plancropdate" tag="inspect" byname="种植日期" style="width: 259px; margin-top: 5px;" opt='{"Required":true,"Height":26,"TipInfo":"请选择种植日期","HeaderCSS":{"padding":"0px","width":"75px"},"TextField":"text","ValueField":"plancropdate","IsOverShow":true,"Padding":"0px 5px","TextAlign":"left","BodyCSS": { "background-color": "transparent" },"Title":"<div class=\"Title\"><span>种植日期</span></div>"}'></div>
            </div>
            <div class="Cell" style="width: 259px;">
                <div class="dev-textbox" name="plancrop" tag="inspect" byname="种植作物" style="width: 259px; margin-top: 5px;" opt='{"Readonly":true,"Height":26,"HeaderCSS":{"padding":"0px","width":"75px"},"IsOverShow":true,"Padding":"0px 5px","TextAlign":"left","BodyCSS": { "background-color": "transparent" },"Title":"<div class=\"Title\"><span>种植作物</span></div>"}'></div>
            </div>
        </div>
        <div class="Row">
            <div class="Cell" style="width: 259px;">
                <div style="display: inline-block; width: 67px; line-height: 35px; float: left; text-align: right; padding-right: 8px;"><span>任务接收人</span></div>
                <div style="width: 184px; height: 35px; line-height: 35px; display: inline-block; float: left; margin-top: 0px; position: relative;">
                    <div id="usercombogrid" data-options="editable:false" style="position: absolute; top: 5px;"></div>
                    <div style="position: absolute; height: 10px; width: 10px; top: 12px; right: 20px; color: red; line-height: 10px;">*</div>
                </div>
                <!--<div class="dev-combobox" name="receiveder" tag="inputcontrol" byname="任务接收人" style="width: 259px; margin-top: 5px;" opt='{"Required":true,"ValueField":"id","TextField":"name","Height":26,"HeaderCSS":{"padding":"0px","width":"75px"},"IsOverShow":true,"Padding":"0px 5px","Title":"<div class=\"Title\"><span>任务接收人</span></div>"}'></div>-->
            </div>
            <div class="Cell" style="width: 259px;">
                <div class="dev-combobox" name="category" tag="inputcontrol" byname="任务类别" style="z-index: 3; width: 259px; margin-top: 5px;" opt='{"Required":true,"Height":26,"TipInfo":"请选择任务类别","HeaderCSS":{"padding":"0px","width":"75px"},"Data":["计划任务","调度任务"],"IsOverShow":true,"Padding":"0px 5px","TextAlign":"left","BodyCSS": { "background-color": "transparent" },"Title":"<div class=\"Title\"><span>任务类别</span></div>"}'></div>
            </div>
        </div>
        <div class="Row" style="height: 70px; width: 528px;">
            <div class="dev-textbox" name="content" tag="inputcontrol" byname="任务内容" style="z-index: 2; width: 518px; height: 60px;" opt='{"MaxLength":120,"Required":true,"TipInfo":"请输入任务内容(最大长度120位)","Type":"multi-text","HeaderCSS":{"padding":"0px","width":"75px"},"BodyCSS":{"margin-top":"5px"},"IsOverShow":true,"Padding":"5px","Title":"<div class=\"Title\">任务内容</div>"}'></div>
        </div>
        <div class="Row">
            <div class="Cell" style="width: 259px;">
                <div style="display: inline-block; width: 67px; line-height: 35px; float: left; text-align: right; padding-right: 8px;"><span>完成期限</span></div>
                <div style="width: 184px; height: 35px; line-height: 33px; display: inline-block; float: left; margin-top: 0px; position: relative;">
                    <input id="compectBTime" data-options="editable:false" />
                    <div style="position: absolute; height: 10px; width: 10px; top: 12px; right: 20px; color: red; line-height: 10px;">*</div>
                </div>
            </div>
        </div>
        <div class="Row" style="height: 70px; width: 528px;">
            <div class="dev-textbox" name="remark" tag="inputcontrol" style="z-index: 2; width: 518px; height: 60px;" opt='{"MaxLength":120,"TipInfo":"请输入备注(最大长度120位)","Type":"multi-text","HeaderCSS":{"padding":"0px","width":"75px"},"BodyCSS":{"margin-top":"5px"},"IsOverShow":true,"Padding":"5px","Title":"<div class=\"Title\">备注</div>"}'></div>
        </div>
        <div class="Row" style="height: 44px;">
            <div id="errormsg" style="display: inline-block; line-height: 44px; height: 44px; width: 363px; margin-left: 5px; color: red;"></div>
            <div class="Submit" style="height: 44px;">
                <div class="Button" tag="save">
                    <span style="line-height: 26px; color: #fcfcfc;">保&nbsp;&nbsp;存</span>
                </div>
                <div class="Button" tag="cancel">
                    <span style="line-height: 26px; color: #fcfcfc;">取&nbsp;&nbsp;消</span>
                </div>
            </div>
        </div>
    </div>

    <div id="toolbarland" style="height: 35px; background-color: #fcfcfc">
        <div style="margin-top: 5px;">
            <div id="landnoSearch" class="dev-textbox" style="width: 108px; float: left; margin-left: 10px; display: inline-block;" opt='{"TipInfo":"输入编号"}'></div>
            <div id="landtypeSearch" class="dev-combobox" style="width: 108px; float: left; margin-left: 10px; display: inline-block;" opt='{ "PopupHeight":"auto","TextField":"data","ValueField":"id","TipInfo":"选择地类名称"}'></div>
            <div id="landattrSearch" class="dev-combobox" style="width: 108px; float: left; margin-left: 10px; display: inline-block;" opt='{ "PopupHeight":"auto","TextField":"data","ValueField":"id","TipInfo":"选择权属属性"}'></div>
            <div style="width: 76px; height: 30px; display: inline-block; margin-left: 8px;">
                <div id="landsearch" style="cursor: pointer; height: 24px; width: 35px; display: inline-block; background-color: #03afd9; float: left; color: #fff; line-height: 24px; text-align: center;">查询</div>
                <div id="landreset" style="cursor: pointer; height: 24px; width: 35px; display: inline-block; background-color: #03afd9; margin-left: 6px; color: #fff; line-height: 24px; text-align: center;">重置</div>
            </div>
        </div>
    </div>
    <div id="toolbarland1" style="height: 35px; background-color: #fcfcfc">
        <div style="margin-top: 5px;">
            <div id="landattrSearch1" class="dev-textbox" style="width: 108px; float: left; margin-left: 10px; display: inline-block;" opt='{"TipInfo":"输入用户编号"}'></div>
            <div id="landnoSearch1" class="dev-textbox" style="width: 108px; float: left; margin-left: 8px; display: inline-block;" opt='{"TipInfo":"输入用户姓名"}'></div>
            <div id="landtypeSearch1" class="dev-textbox" style="width: 108px; float: left; margin-left: 8px; display: inline-block;" opt='{"TipInfo":"输入电话号码"}'></div>
            <div style="width: 76px; height: 30px; display: inline-block; margin-left: 8px;">
                <div id="landsearch1" style="cursor: pointer; height: 24px; width: 35px; display: inline-block; background-color: #03afd9; color: #fff; float: left; line-height: 24px; text-align: center;">查询</div>
                <div id="landreset1" style="cursor: pointer; height: 24px; width: 35px; display: inline-block; background-color: #03afd9; margin-left: 6px; color: #fff; line-height: 24px; text-align: center;">重置</div>
            </div>
        </div>
    </div>

</body>
</html>
