<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>农户详细详细</title>
    <link rel="stylesheet" type="text/css" href="../../theme/icon.css" />
    <link rel="stylesheet" type="text/css" href="../../css/app.css" />
    <link rel="stylesheet" type="text/css" href="../../css/main.css" />
    <link rel="stylesheet" type="text/css" href="../../css/icon.css" />
    <link type="text/css" href="../../css/dev.css" rel="stylesheet" />
    <script type="text/javascript" src="../../js/jquery.min.js"></script>
    <script type="text/javascript" src="../../js/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="../../js/easyui-lang-zh_CN.js"></script>
    <script type="text/javascript" src="../../js/linq.min.js"></script>
    <script type="text/javascript" src="../../js/data.util.js"></script>
    <script type="text/javascript" src="../../js/jquery.dev.control.js"></script>
    <style type="text/css">
        .basicInfo {
            height: 277px;
            width: 498px;
            position: relative;
        }

            .basicInfo .info {
                height: 215px;
                width: 498px;
                border-bottom: 1px dashed #ddd;
            }

                .basicInfo .info .leftinfo {
                    height: 215px;
                    width: 287px;
                    display: inline-block;
                    float: left;
                }

                    .basicInfo .info .leftinfo .item {
                        height: 35px;
                        width: 287px;
                        border-bottom: 1px dashed #ddd;
                    }

                        .basicInfo .info .leftinfo .item .title {
                            width: 65px;
                            height: 35px;
                            padding-right: 5px;
                            text-align: right;
                            display: inline-block;
                            float: left;
                            line-height: 35px;
                        }

                        .basicInfo .info .leftinfo .item .value {
                            width: 210px;
                            height: 35px;
                            padding-left: 7px;
                            display: inline-block;
                            line-height: 35px;
                        }
    </style>
    <script type="text/javascript">
        var Dev = window.top.window.dev;
        var parent, farmerid;
        var tabControl;
        var isadmin;
        function WidgetCommunication(s) {//部件通讯
            parent = s.parent;
            farmerid = s.param.farmerId;
            isadmin = (Dev.cookie.user.posts[0].postowner == 1 && Dev.cookie.user.posts[0].mainpost == 1);
            //初始化tab
            initTab();
            getdata();
        }
        function initTab() {
            $("#farmercontent").empty();
            var items = [{ ID: "fbasicInfo", Name: "基础信息", Content: $(".basicInfo"), Width: 498, Height: 251 }, { ID: "fdetailInfo", Name: "详细信息", Content: $('#detailInfo'), Width: 498, Height: 251 }];
            tabControl = new Dev.Tab({
                ID: "farmerTab",
                Width: 498,
                Height: 277,
                TabNormalCls: "liveNormalTabCls",
                TabSelectedCls: "liveSelectedTabCls",
                Items: items
            });
            tabControl.bind("onSelected", function () { });
            $("#farmercontent").append(tabControl.Target);
            tabControl.Layout();
        }
        //获取当前数据
        function getdata() {
            $.ajax({
                type: "get",
                url: Dev.GetSystemUrlByRelID("Service") + "farmer/qorg/" + farmerid + "?" + new Date().getTime(),
                success: function (response) {
                    loadData(response.data);
                }
            });
        }
        function loadData(data) {
            if (Dev.IsNull(data)) return;
            $.each(data, function (e, o) {
                var curr = $('div[name="' + e + '"]', $(".basicInfo"));
                var isencryp = curr.attr("tag");
                var slen = curr.attr("slen");
                var elen = curr.attr("elen");
                if (!Dev.IsNull(curr) && curr.length > 0) {
                    if (e == "cultivated") o += "(亩)";
                    if (!isadmin && !Dev.IsNull(isencryp)) o = Dev.simpleencryp(o, parseInt(slen), parseInt(elen));//如果不是岗位管理员则需要简易加密
                    curr.html(o);
                }
                var curr1 = $('div[name="' + e + '"]', $("#detailInfo"));
                if (!Dev.IsNull(curr1) && curr1.length > 0) {
                    if (e == "cultivated") o += "(亩)"
                    curr1.html(o);
                }
            });
            //显示行政区
            var xzq = "";
            if (!Dev.IsNullAll(data.province)) xzq += data.province + " ";
            if (!Dev.IsNullAll(data.city)) xzq += data.city + " ";
            if (!Dev.IsNullAll(data.county)) xzq += data.county + " ";
            if (!Dev.IsNullAll(data.town)) xzq += data.town + " ";
            if (!Dev.IsNullAll(data.village)) xzq += data.village + " ";
            $("div[name='xzqtext'").html(xzq);
            if (!Dev.IsNull(data.photouri)) $("div[name='imgsview']").css("background-image", "url('" + data.photouri + "')");
        }
    </script>
</head>
<body>
    <div id="farmercontent" style="height: 277px; width: 498px;">
    </div>
    <div class="basicInfo">
        <div class="info">
            <div class="leftinfo">
                <div class="item">
                    <div class="title">姓名</div>
                    <div name="name" class="value"  tag="isencryp" slen="1" elen="0"></div>
                </div>
                <div class="item">
                    <div class="title">身份证号</div>
                    <div class="value" name="cardid"  tag="isencryp" slen="3" elen="4"></div>
                </div>
                <div class="item">
                    <div class="title">联系电话</div>
                    <div class="value" name="mobilephone" tag="isencryp" slen="3" elen="3"></div>
                </div>
                <div class="item">
                    <div class="title">组织机构</div>
                    <div name="orgid" class="value" style="overflow-x:hidden;overflow-y:auto;"></div>
                </div>
                <div class="item">
                    <div class="title">耕地面积</div>
                    <div name="cultivated" class="value"></div>
                </div>
                <div class="item">
                    <div class="title">银行卡号</div>
                    <div name="bankcard" class="value"  tag="isencryp" slen="4" elen="3"></div>
                </div>
            </div>
            <div style="height: 200px; border-left: 1px dashed #ddd; width: 200px; display: inline-block; padding: 7px 5px">
                <div name="imgsview" style="height: 200px; width: 200px; background-repeat: no-repeat; background-position: center; background-image: url('../../image/agri/nopic.png');background-size:200px;"></div>
            </div>
        </div>
        <div style="width: 498px; height: 35px;">
            <div style="width: 65px; height: 35px; line-height: 35px; display: inline-block; float: left; padding-right: 5px; text-align: right;">地区</div>
            <div name="xzqtext" style="width: 420px; height: 35px; line-height: 35px; display: inline-block; padding-left: 7px;"></div>
        </div>
    </div>
    <div id="detailInfo" style="height: 251px; width: 100%;">
        <div style="height: 108px; width: 498px;">
            <div style="height: 108px; width: 249px; display: inline-block; float: left;">
                <div style="height: 35px; width: 100%; border-bottom: 1px dashed #ddd;">
                    <div style="width: 65px; height: 35px; display: inline-block; float: left; padding-right: 5px; line-height: 35px; text-align: right;">性别</div>
                    <div name="sex" style="width: 170px; height: 35px; display: inline-block; padding-left: 7px; line-height: 35px;"></div>
                </div>
                <div style="height: 35px; width: 100%; border-bottom: 1px dashed #ddd;">
                    <div style="width: 65px; height: 35px; display: inline-block; float: left; padding-right: 5px; line-height: 35px; text-align: right;">文化程度</div>
                    <div name="education" style="width: 170px; height: 35px; display: inline-block; padding-left: 7px; line-height: 35px;"></div>
                </div>
                <div style="height: 35px; width: 100%; border-bottom: 1px dashed #ddd;">
                    <div style="width: 65px; height: 35px; display: inline-block; float: left; padding-right: 5px; line-height: 35px; text-align: right;">户籍地</div>
                    <div name="domicile" style="width: 170px; height: 35px; display: inline-block; padding-left: 7px; line-height: 35px;"></div>
                </div>
            </div>
            <div style="height: 108px; width: 248px; display: inline-block; border-left: 1px dashed #ddd;">
                <div style="height: 35px; width: 100%; border-bottom: 1px dashed #ddd;">
                    <div style="width: 65px; height: 35px; display: inline-block; float: left; padding-right: 5px; line-height: 35px; text-align: right;">民族</div>
                    <div name="nation" style="width: 169px; height: 35px; display: inline-block; padding-left: 7px; line-height: 35px;"></div>
                </div>
                <div style="height: 35px; width: 100%; border-bottom: 1px dashed #ddd;">
                    <div style="width: 65px; height: 35px; display: inline-block; float: left; padding-right: 5px; line-height: 35px; text-align: right;">政治面貌</div>
                    <div name="political" style="width: 169px; height: 35px; display: inline-block; padding-left: 7px; line-height: 35px;"></div>
                </div>
                <div style="height: 35px; width: 100%; border-bottom: 1px dashed #ddd;">
                    <div style="width: 65px; height: 35px; display: inline-block; float: left; padding-right: 5px; line-height: 35px; text-align: right;">户口性质</div>
                    <div name="household" style="width: 169px; height: 35px; display: inline-block; padding-left: 7px; line-height: 35px;"></div>
                </div>
            </div>
        </div>
        <div style="height: 35px; line-height: 35px; width: 100%; border-bottom: 1px dashed #ddd;">
            <div style="width: 65px; height: 35px; display: inline-block; float: left; text-align: right; padding-right: 5px;">详细信息</div>
            <div name="address" style="width: 421px; height: 35px; display: inline-block; padding-left: 7px;"></div>
        </div>
        <div style="height: 106px; width: 100%;">
            <div style="width: 65px; height: 106px; line-height: 106px; display: inline-block; float: left; text-align: right; padding-right: 5px;">备注</div>
            <div name="remark" style="width: 420px; height: 96px; line-height:20px; display: inline-block; padding-left: 7px;padding-top:5px;padding-bottom:5px"></div>
        </div>
    </div>
</body>
</html>
