<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>农具管理</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <link rel="stylesheet" href="../../theme/default/easyui.css" />
    <link rel="stylesheet" type="text/css" href="../../theme/icon.css" />
    <link rel="stylesheet" type="text/css" href="../../css/app.css" />
    <link rel="stylesheet" type="text/css" href="../../css/main.css" />
    <link rel="stylesheet" type="text/css" href="../../css/icon.css" />
    <link type="text/css" href="../../css/dev.css" rel="stylesheet" />
    <script type="text/javascript" src="../../js/jquery.min.js"></script>
    <script type="text/javascript" src="../../js/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="../../js/easyui-lang-zh_CN.js"></script>
    <script type="text/javascript" src="../../js/linq.min.js"></script>
    <script type="text/javascript" src="../../js/data.util.js"></script>
    <script type="text/javascript" src="../../js/jquery.dev.control.js"></script>
    <script src="../../js/dev.ui.js"></script>
    <style type="text/css">
        .content {
            height: 100%;
            width: 100%;
            position: relative;
        }

        .Title {
            width: 75px;
            text-align: right;
            line-height: 38px;
            height: 38px;
            display: inline-block;
            float: left;
        }

            .Title .Icon {
                width: 16px;
                height: 16px;
                display: inline-block;
                margin-top: 11px;
            }

            .Title .Text {
                display: inline-block;
                float: right;
                /*width: 49px;*/
                margin-left: 4px;
            }

        .content .SearchDiv {
            width: 210px;
            height: 38px;
            display: inline-block;
            margin-left: 0px;
            margin-right: 0px;
            float: left;
        }

        .Button {
            width: 70px;
            height: 26px;
            float: left;
            margin-top: 4px;
            background-color: #16dbbb;
            /*border-radius: 5px;*/
            text-align: center;
            border: 1px solid #16dbbb;
            display: inline-block;
            margin-left: 5px;
        }

            .Button:hover {
                background-color: #5227de;
                border: 1px solid #5227de;
                cursor: pointer;
            }

            .Button:active {
                background-color: #210097;
                border: 1px solid #210097;
                cursor: pointer;
            }

        .ButtonDisable {
            background-color: #808080;
            color: #000;
            border: 1px solid #808080;
        }

            .ButtonDisable:hover {
                background-color: #808080;
                color: #000;
                border: 1px solid #808080;
            }

        .datagrid-row {
            height: 28px;
        }
    </style>
    <script type="text/javascript">
        var Dev = window.top.window.dev;
        var dataGrid, pageIndex = 1, pageSize = 5;
        var treeControl;
        var comboTree;
        var parent;
        var selectorgid;
        var searchNum;
        var dialog, flashDialog;
        var orgFilter, modlistFilter;
        var treeData = [];
        var orgids = [];
        var orgFilter;
        var editWin;
        var updateid;
        var isadd = true;
        var msg = {
            netout: "网络超时，请稍后再试！",
            deleteFailed: "删除失败，请稍后再试！",
            deleteSuccess: "删除成功！",
            addSuccess: "操作成功！",
            addFailed: "操作失败，请稍后再试！"
        };
        var bindType;
        function WidgetCommunication(s) {//部件通讯
            parent = s.parent;
            Dev.App.BottomPanel.Header.css({ "background": "#14cdad", "color": "#fcfcfc", "font-weight": "bold" });
            Dev.App.BottomPanel.SetIconCls("farm");
            inittree();
            initDataGrid();
            resize();
            $(window).resize(function () {
                resize();
            });
            searchNum = $("#machineNum").prop("$this");
            bindType = Dev.GetDicData(["farmType"]);     //   绑定字典数据
            $(".Button").click(function () {
                var tag = $(this).attr("tag");
                if (tag == "add") {
                    //editCancel();
                    isadd = true;
                    updateid = "";
                    if ($(this).hasClass("ButtonDisable")) return;
                    if (Dev.IsNull(editWin)) {
                        editWin = new Dev.Window({
                            ID: "editwin",
                            Title: "农具新增",
                            IconCls: "farm",
                            Parent: Dev.App.FillPanel.Target,
                            Maximizable: false,
                            Modal: true,
                            Draggable: true,
                            HAlign: 'center',
                            VAlign: 'center',
                            Resizable: false,
                            Content: $("#EditDiv"),
                            Height: 300,
                            Width: 500
                        });
                        comboTree = new Dev.Combotree({
                            Required: true, PopupHeight: 'auto', TipInfo: "请选择",
                            MultiSelect: false, StateField: "State", ValueField: "id",
                            TextField: "name", ChildrenField: "child", Height: 24, Border: "1px", Width: 154
                        });
                        if (!Dev.IsNull(bindType) && bindType.length > 0) {            //bin the Dic data
                            var editMacType = $("#macType", editWin.Target).prop("$this");
                            editMacType.SetData(bindType);
                            editMacType.Layout();
                        }
                        $("#treecomboDiv", $(".MachineEdit", Dev.App.FillPanel.Target)).append(comboTree.Target);
                        comboTree.Layout();
                        editWin.bind("onClosing", function () {
                            showmodal(false);
                            editCancel();
                            bindData();
                        });
                    }
                    else {
                        editWin.SetTitle("农具新增");
                        editWin.SetIconCls("farm");
                        editWin.Open();
                        editCancel();

                    }
                    var selectnode = treeControl.GetSelectNode();
                    comboTree.SetData(selectnode[0].$this);
                    showmodal(true);
                }
                if (tag == "search") {
                    pageIndex = 1;
                    bindData();
                }
                if (tag == "clear") {
                    searchclear();
                    bindData();
                }
                if (tag == "save") {
                    saveInfo();
                }
                if (tag == "deletes") deletes();
                if (tag == "cancel") {
                    editWin.Close(); //清空重置
                }
            });
            flashDialog = new Dev.Messager({ Height: 95, Width: 200, AutoShow: false, Type: "question", Timeout: 1500, ButtonVisible: false, AutoVisible: true, Effect: "normal" });
            dialog = new Dev.Messager({ AutoShow: false, Type: "question" });
            parent.one("onClosing", function () {
                Dev.App.BottomPanel.SetHeight(262);
                if (!Dev.IsNull(treeControl)) {
                    treeControl.unbind("onSelectChanged");
                    treeControl = null;
                }
                if (!Dev.IsNull(dataGrid)) {
                    dataGrid.Target.unbind("onSelectPage");
                    dataGrid.Target.unbind("onPageSizeChange");
                    dataGrid = null;
                }
                if (!Dev.IsNull(editWin)) {
                    editWin.unbind("onClosing");
                    editWin.Close();
                    editWin.Destroy();
                    editWin = null;
                }

                if (!Dev.IsNull(detailWin)) {
                    detailWin.unbind("onClosing");
                    detailWin.Close();
                    detailWin.Destroy();
                    detailWin = null;
                }
            });
        }
        function initDataGrid() {
            if (Dev.IsNull(dataGrid)) {
                $("#gridDiv").empty();
                var columns = [
                    { field: "ck", width: 30, align: 'center', title: '勾选', sortable: false, checkbox: true },
                    { field: "farmname", width: 90, align: 'center', title: '名称', sortable: false },
                    { field: "farmtype", width: 65, align: 'center', title: '类型', sortable: false },
                    { field: "farmspec", width: 65, align: 'center', title: '型号', sortable: false },
                    { field: "vendor", width: 65, align: 'center', title: '厂商', sortable: false },
                    { field: "farmsize", width: 65, align: 'center', title: '长度(m)', sortable: false },
                    { field: "farmwidth", width: 65, align: 'center', title: '宽度(m)', sortable: false },
                    {
                        field: "createdate", width: 80, align: 'center', title: '创建时间', sortable: false,
                        formatter: function (value, row, index) {
                            return Dev.GetDateString(value);
                        }
                    },
                    {
                        field: "_oprate", width: 50, align: 'center', title: '操作', sortable: false,
                        formatter: function (value, row, index) {
                            return '<a href="javascript:void(0)" style="color:blue;" onclick="update(\'' + row.id + '\',\'' + index + '\')" title="修改"><img src="../../image/agri/update.png"/></a>&nbsp;<a href="javascript:void(0)" style="color:blue;margin-left:6px;" onclick="detailInfo(\'' + row.id + '\')" title="详细信息"><img src="../../image/agri/cartype.png"/></a>&nbsp;<a href="javascript:void(0)" style="color:blue;margin-left:6px;" onclick="deleteinfo(\'' + index + '\')" title="删除"><img src="../../image/agri/delete.png"/></a>';
                        }
                    },
                ];
                dataGrid = new UCDataGrid(Dev, {
                    PageIndex: pageIndex, PageSize: pageSize, RowNumbers: false, ID: "trackGrid", pagequery: false, IsSizeSelect: true
                });
                $("#gridDiv").append(dataGrid.Target);
                dataGrid.Layout(columns);
                dataGrid.Target.bind("onSelectPage", function (s, e) {
                    pageIndex = e.index;
                    bindData();
                });
                dataGrid.Target.bind("onPageSizeChange", function (s, e) {
                    if (Dev.IsNull(e)) return;
                    pageIndex = 1;
                    pageSize = e;
                    bindData();
                });
            }
        }
        var detailWin;
        function detailInfo(id) {
            if (Dev.IsNull(detailWin)) {
                detailWin = new Dev.Window({
                    ID: "addwin",
                    IconCls: 'icon-detailinfo',
                    Title: "农具详情",
                    Parent: Dev.App.FillPanel.Target,
                    Maximizable: false,
                    Modal: true,
                    Draggable: true,
                    HAlign: 'center',
                    VAlign: 'center',
                    Resizable: false,
                    Url: Dev.App.Root + "html/detailinfo/farmtools.html",
                    Height: 260,
                    Width: 500,
                    Parameters: { id: id }
                });
                detailWin.bind("onClosing", function () {
                });
            } else {
                detailWin.SetUrl(Dev.App.Root + "html/detailinfo/farmtools.html");
                detailWin.Parameters = { id: id };
                detailWin.Open();
            }
        } //详细信息页面
        function bindData() {
            var condition = "1=1";//搜索条件
            if (!Dev.IsNull(searchNum)) {
                var machineNumvalue = searchNum.GetValue();
                if (!Dev.IsNull(machineNumvalue) && machineNumvalue.length > 0) {
                    condition += " AND ( \"FARMNAME\"  LIKE '%" + $.trim(machineNumvalue) + "%'" + " OR " + "UPPER( \"FARMNAME\" )  LIKE " + "UPPER('%" + $.trim(machineNumvalue) + "%')" + " OR " + "LOWER( \"FARMNAME\" )  LIKE " + "LOWER('%" + $.trim(machineNumvalue) + "%'))";       //大小写不敏感
                }
            }
            //获取上次时间
            var time1 = $("#uploadtime1").datebox("getValue");
            var time2 = $("#uploadtime2").datebox("getValue");
            if (!Dev.IsNull(time1) && !Dev.IsNull(time2)) {
                //转换成为dateTime
                var t1 = new Date(time1.replace(/-/g, "/"));
                var t2 = new Date(time2.replace(/-/g, "/"));
                if (t1.getTime() > t2.getTime()) {
                    var temp = time1;
                    time1 = time2;
                    time2 = temp;
                }
            }
            if (!Dev.IsNull(time1)) condition += " AND \"CREATEDATE\">='" + time1 + " 00:00:00'";
            if (!Dev.IsNull(time2)) condition += " AND \"CREATEDATE\"<='" + time2 + " 23:59:59'";
            if (!dev.IsNull(orgFilter)) condition += " AND  " + orgFilter;
            condition += " ORDER BY \"CREATEDATE\" DESC";
            // condition += "ORDER BY  \"UPDATEDATE\"" + "DESC";

            //请求分页内容
            $.ajax({
                type: "POST",
                data: condition,
                contentType: "application/json;charset=UTF-8",
                url: Dev.cookie.baseUri + "farm/getbyfilter/" + pageIndex + "/" + pageSize,
                success: function (response) {
                    var currentData = [];
                    if (response.statusCode == 200) {
                        if (!Dev.IsNull(response.data)) {
                            currentData = response.data.dataSource;
                            dataGrid.Load(currentData, response.data.pageInfo);
                        } else {
                            loadError();
                        }
                    } else {
                        flashDialog.Alert(msg.netout, "error");
                        loadError();
                    }
                },
                error: function (e) {
                    flashDialog.Alert(msg.netout, "error");
                    loadError();
                }

            })
        }
        function loadError() {
            dataGrid.Load([], { totalCount: 0, pageIndex: pageIndex, pageSize: pageSize, pageCount: 0 });
        }
        function inittree() {
            treeControl = $('.dev-tree').prop("$this");
            treeControl.bind("onSelectChanged", function (s, e) {
                searchclear();
                var treenode = e;
                var isleaf = treeControl.IsLeaf(treenode);
                orgids = [];
                orgids.push(e.id);
                if (!isleaf) {
                    var allchilds = treeControl.GetAllChildren(treenode);
                    for (var i = 0; i < allchilds.length; i++) orgids.push(allchilds[i].id);
                }
                orgFilter = "";
                if (Dev.IsNull(orgids) || orgids.length == 0) return;
                orgFilter = "\"ORGID\"  IN(";
                for (var i = 0; i < orgids.length; i++) orgFilter += "'" + orgids[i] + "',";
                orgFilter = orgFilter.substr(0, orgFilter.length - 1);
                orgFilter += ")";
                bindData();
            });
            var orgid = Dev.cookie.user.orgid;
            $.ajax({
                url: Dev.GetSystemUrlByRelID("Service") + "organize/gettreebyid/" + orgid + "?" + new Date().getTime(),
                type: "Get",
                contentType: 'application/json',
                dataType: 'json',
                success: function (result) {
                    treeData = Dev.ConvertTreeData(result.data, orgid);
                    treeControl.LoadData(treeData);
                    if (treeData.length > 0) treeControl.SetSelectNode(treeControl.GetRoots()[0]);
                }
            });
            bindData();
        }
        function saveInfo() {
            var textcontrol = $(".dev-textbox", $(".MachineEdit", Dev.App.FillPanel.Target));
            var numbercontrol = $('.dev-numberbox', $(".MachineEdit", Dev.App.FillPanel.Target));
            var comboboxcontrol = $(".dev-combobox", $(".MachineEdit", Dev.App.FillPanel.Target));
            var model = {};
            $("#errorMsg", $(".MachineEdit", Dev.App.FillPanel.Target)).html("");
            for (var i = 0; i < textcontrol.length; i++) {
                var tag = $(textcontrol[i]).attr("name");
                var value = $(textcontrol[i]).prop("$this").GetValue().trim();
                model[tag] = value;
            }
            for (var i = 0; i < numbercontrol.length; i++) {
                var tag = $(numbercontrol[i]).attr("name");
                var value = $(numbercontrol[i]).prop("$this").GetValue().trim();
                model[tag] = value;
            }
            for (var i = 0; i < comboboxcontrol.length; i++) {
                var tag = $(comboboxcontrol[i]).attr("name");
                var value = $(comboboxcontrol[i]).prop("$this").GetText();          //获取combobox选定值
                model[tag] = value;
            }
            model.orgid = comboTree.GetValue();
            var isunique = true;
            if (isadd) {
                pathMethod = "addFarm";
            }
            else {
                model.id = oldid;  //如果是修改，需要获取旧的id（主键信息）
                pathMethod = "updateFarm";
            }   //区别新增还是更新
            var isok = verify(model);            //简单长度与非空验证
            if (!isok) return;

            $.ajax({
                type: "POST",
                data: JSON.stringify(model),
                async: false,
                contentType: 'application/json',
                url: Dev.cookie.baseUri + "farm/" + pathMethod,
                success: function (response) {
                    if (response.statusCode == 200 && response.data == false) isunique = false;
                    else {
                        if (Dev.IsNull(response) || response.statusCode == 400) {
                            flashDialog.Alert(msg.addFailed, "error");
                        } else {
                            flashDialog.Alert(msg.addSuccess, "success");
                            pageIndex = 1;
                            bindData();
                        }
                    }
                },
                error: function (e) {
                    flashDialog.Alert(msg.addFailed, "error");
                }
            });
            var k = "";
            if (!isunique) {
                $("#errorMsg", $(".MachineEdit", Dev.App.FillPanel.Target)).html("农具名称已存在！");
                return;
            }
            editCancel();
            editWin.Close();
        }
        function verify(model) {
            var errWin = $("#errorMsg", $(".MachineEdit", Dev.App.FillPanel.Target));
            if (Dev.IsNull(model.farmname)) { errWin.html("农具名称不能为空！"); return false; }
            if (model.farmname.length > 18) { errWin.html("农具名称太长！"); return false; }
            if (Dev.IsNull(model.farmtype)) { errWin.html("农具类型不能为空！"); return false; }
            if (Dev.IsNull(model.farmspec)) { errWin.html("农具型号不能为空！"); return false; }
            if (model.farmspec.length > 18) { errWin.html("农具型号太长！"); return false; }
            if (Dev.IsNull(model.vendor)) { errWin.html("厂商不能为空！"); return false; }
            if (model.vendor.length > 18) { errWin.html("厂商名称太长！"); return false; }
            return true;
        }
        function deletes() {
            var rows = dataGrid.DataGrid.datagrid("getChecked");
            var curRowNo = dataGrid.DataGrid.datagrid("getData").total;       //获取已有的数据行数
            if (curRowNo == rows.length && pageIndex != 1) pageIndex -= 1;     //如果没删完，保持在本页，删完回到上一页。
            if (Dev.IsNull(rows) || rows.length == 0) {
                flashDialog.Alert("请选择需要删除的数据!", "info");
                return;
            }
            dialog.Confirm('确定删除所有勾选记录吗？', function (r) {
                if (!r) return;
                var ids = [];
                for (var i = 0; i < rows.length; i++) ids.push(rows[i].id);
                $.ajax({
                    type: "POST",
                    data: { ids: ids.join(',') },
                    url: Dev.GetSystemUrlByRelID("Service") + "farm/" + "deleteManyFarmByIds",
                    success: function (re) {
                        if (!re.statusCode == 200) { flashDialog.Alert("删除失败!", "info"); return; };
                        flashDialog.Alert("删除成功!", "info");
                        bindData();
                    },
                    error: function (msg) {
                        flashDialog.Alert("删除失败!", "info");
                    }
                });
            }, "question");
        }        //批量删除
        function editCancel() {
            //清空所有信息
            var textcontrol = $(".dev-textbox", $(".MachineEdit", Dev.App.FillPanel.Target));
            var numbercontrol = $(".dev-numberbox", $(".MachineEdit", Dev.App.FillPanel.Target));
            var comboboxcontrol = $(".dev-combobox", $(".MachineEdit", Dev.App.FillPanel.Target));
            for (var i = 0; i < textcontrol.length; i++) {
                var currcontrol = $(textcontrol[i]).prop("$this");
                currcontrol.Clear();
                if (!Dev.IsNull(currcontrol.SetLengthTip)) currcontrol.SetLengthTip("");
            }
            for (var i = 0; i < numbercontrol.length; i++) { var currcontrol = $(numbercontrol[i]).prop("$this"); currcontrol.Clear(); }
            for (var i = 0; i < comboboxcontrol.length; i++) { var currcontrol = $(comboboxcontrol[i]).prop("$this"); currcontrol.SetValue(""); }
            $("#errorMsg", $(".MachineEdit", Dev.App.FillPanel.Target)).html("");
        }
        var oldid;
        function update(id, index) {
            updateid = id;
            isadd = false;
            dataGrid.DataGrid.datagrid("selectRow", index);
            var row = dataGrid.DataGrid.datagrid("getSelected");
            oldid = row.id;
            if (Dev.IsNull(row) || row.length == 0) return;
            if (Dev.IsNull(editWin)) {
                editWin = new Dev.Window({
                    ID: "editwin",
                    IconCls: "machine-trackedit",
                    Title: "农具修改",
                    Parent: Dev.App.FillPanel.Target,
                    Maximizable: false,
                    Modal: true,
                    Draggable: true,
                    HAlign: 'center',
                    VAlign: 'center',
                    Resizable: false,
                    Content: $("#EditDiv"),
                    Height: 300,
                    Width: 500
                });
                comboTree = new Dev.Combotree({
                    Required: true, PopupHeight: 'auto', TipInfo: "请选择",
                    MultiSelect: false, StateField: "State", ValueField: "id",
                    TextField: "name", ChildrenField: "child", Height: 24, Border: "1px", Width: 154
                });
                if (!Dev.IsNull(bindType) && bindType.length > 0) {            //bin the Dic data
                    var editMacType = $("#macType", editWin.Target).prop("$this");
                    editMacType.SetData(bindType);
                    editMacType.Layout();
                }
                $("#treecomboDiv", $(".MachineEdit", Dev.App.FillPanel.Target)).append(comboTree.Target);
                comboTree.Layout();
                editWin.bind("onClosing", function () {
                    showmodal(false);
                    editCancel();
                    bindData();
                });
            }
            else {
                editWin.SetIconCls("machine-trackedit");
                editWin.SetTitle("农具修改");
                editWin.Open();
            }
            loadData(row);
            showmodal(true);
        }
        function loadData(model) {
            var textcontrol = $(".dev-textbox", $(".MachineEdit", Dev.App.FillPanel.Target));
            var numbercontrol = $('.dev-numberbox', $(".MachineEdit", Dev.App.FillPanel.Target));
            var comboboxcontrol = $(".dev-combobox", $(".MachineEdit", Dev.App.FillPanel.Target));
            var selectnode = treeControl.GetSelectNode();
            comboTree.SetData(selectnode[0].$this);
            if (!Dev.IsNull(model.orgid)) comboTree.SetValueEx(model.orgid);

            for (var i = 0; i < textcontrol.length; i++) {
                var tag = $(textcontrol[i]).attr("name");
                var currcontrol = $(textcontrol[i]).prop("$this");
                if (!Dev.IsNull(currcontrol)) {
                    currcontrol.SetValue(model[tag]);
                    currcontrol.SetLengthTip(model[tag]);
                }
            }
            for (var i = 0; i < numbercontrol.length; i++) {
                var tag = $(numbercontrol[i]).attr("name");
                var currcontrol = $(numbercontrol[i]).prop("$this");
                if (!Dev.IsNull(currcontrol) && !Dev.IsNull(model[tag])) currcontrol.SetValue(model[tag]);
            }
            for (var i = 0; i < comboboxcontrol.length; i++) {
                var tag = $(comboboxcontrol[i]).attr("name");
                var currcontrol = $(comboboxcontrol[i]).prop("$this");
                if (!Dev.IsNull(currcontrol)) currcontrol.SetText(model[tag]);        //combobox  
            }
        }       //加载被修改的农具信息

        function resize() {
            var wh = Dev.App.BottomPanel.Target.outerHeight();
            var height = $(window).height();
            treeControl.SetHeight(height == 0 ? (wh - 26) : (height - 26));
            var gridheight = height - 40;
            var gridwidth = parseInt($(window).width() * 0.80) - 2;
            if (gridwidth < 895) {
                gridwidth = 895;
                gridheight = parseInt(gridheight) - 26;
            }
            $("#searchDiv").width(gridwidth);
            $("#gridDiv").height(gridheight).width(gridwidth);
            if (!Dev.IsNull(dataGrid)) dataGrid.Resize(gridwidth, gridheight);
        }
        function showmodal(isshow) {
            if (Dev.IsNull(isshow)) return;
            $("#shade").css("display", (isshow ? "block" : "none"));
        }
        function searchclear() {
            pageIndex = 1;
            if (!Dev.IsNull(searchNum)) searchNum.Clear();
            $("#uploadtime1").datebox("setValue", "");
            $("#uploadtime2").datebox("setValue", "");
        }
        //删除
        function deleteinfo(index) {
            dataGrid.DataGrid.datagrid("selectRow", index);
            var row = dataGrid.DataGrid.datagrid("getSelected");
            if (Dev.IsNull(row) || row.length == 0) return;
            dialog.Confirm('确定删除所选记录吗？', function (r) {
                if (!r) return;
                $.ajax({
                    type: "POST",
                    data: { ids: row.id },
                    url: Dev.cookie.baseUri + "farm/deleteManyFarmByIds",
                    success: function (response) {
                        if (response.statusCode == 200) {
                            flashDialog.Alert(msg.deleteSuccess, "success", function () {
                            });
                            pageIndex = 1;
                            bindData();
                        } else {
                            flashDialog.Alert(msg.deleteFailed, "error");
                        }
                    },
                    error: function (e) {
                        flashDialog.Alert(msg.netout, "error");
                    }
                });
            }, "question");
        }
    </script>
</head>
<body>
    <div id="shade" style="width: 100%; height: 100%; position: absolute; z-index: 10; display: none; background: rgba(255,255,255,0.3)"></div>
    <div id="content" class="content">
        <div style="height: 100%; width: 20%; position: absolute;">
            <!-- <div style="height: 26px; line-height: 26px; width: 100%; background-color: #ddd;">
                <span
                    style="margin-left: 15px; color: #0099cc; line-height: 26px; letter-spacing: 3px; font-size: 12px;">组织机构</span>
            </div>-->
            <div id="treediv" style="width: 100%; height: 100%;">
                <div class="dev-tree"
                    opt='{"ValueField":"id","TextField":"name","ChildrenField":"child","Height":220}'>
                </div>
            </div>
        </div>
        <div style="height: 100%; width: 80%; position: absolute; left: 20%; overflow: auto; overflow-y: hidden">
            <div id="searchDiv"
                style="height: 38px; width: 100%; border-left: 1px solid #ddd; position: relative; min-width: 895px;">
                <div style="height: 38px; position: absolute; left: 0px;">
                    <div class="SearchDiv" style="margin-left: -23px">
                        <div id="machineNum" class="dev-text" style="z-index: 2; width: 195px; display: inline-block;"
                            opt='{"TipInfo":"","HeaderCSS":{"padding":"0px","width":"75px"},"IsOverShow":true,"Padding":"0px 5px","TextAlign":"left","BodyCSS": { "background-color": "transparent","margin-top":"8px","margin-left":"8px"},"Title":"<div class=\"Title\"><div class=\"Icon machine-name\"></div><span class=\"Text\">名称</span></div>"}'>
                        </div>
                    </div>
                    <div class="SearchDiv" style="margin-left: 8px">
                        <div style="width: 75px; height: 38px; line-height: 40px; text-align: right; display: inline-block; float: left;">
                            <div class="icon-calendar"
                                style="height: 16px; width: 16px; display: inline-block; float: left; margin-top: 11px;">
                            </div>
                            <span style="height: 38px; line-height: 40px; width: 49px; float: right; padding-right: 5px;">创建时间</span>
                        </div>
                        <div style="width: 120px; height: 38px; line-height: 38px; display: inline-block; float: left; margin-top: 0px;">
                            <input id="uploadtime1" class="easyui-datebox" data-options="width:120,height:24,editable:false" />
                        </div>
                    </div>
                    <div class="SearchDiv">
                        <div style="width: 20px; height: 38px; display: inline-block; line-height: 40px; text-align: center; float: left; padding-right: 10px;">
                            至
                        </div>
                        <div style="width: 120px; height: 38px; line-height: 38px; display: inline-block; margin-top: 0px;">
                            <input id="uploadtime2" class="easyui-datebox" data-options="width:120,editable:false,height:24" />
                        </div>
                    </div>
                </div>
                <div style="width: 321px; height: 100%; position: absolute; right: 10px; z-index: 2">
                    <div class="Button" tag="search">
                        <div class="machine-query"
                            style="height: 16px; width: 16px; margin-top: 4px; margin-left: 4px; display: inline-block; float: left;">
                        </div>
                        <span style="line-height: 26px; color: #fcfcfc;">查&nbsp;询</span>
                    </div>
                    <div class="Button" tag="clear">
                        <div class="machine-reset"
                            style="height: 16px; width: 16px; margin-top: 4px; margin-left: 4px; display: inline-block; float: left;">
                        </div>
                        <span style="line-height: 26px; color: #fcfcfc;">重&nbsp;置</span>
                    </div>
                    <div class="Button" tag="add">
                        <div class="machine-add"
                            style="height: 16px; width: 16px; margin-top: 4px; margin-left: 4px; display: inline-block; float: left;">
                        </div>
                        <span style="line-height: 26px; color: #fcfcfc;">新&nbsp;增</span>
                    </div>
                    <div class="Button" tag="deletes" style="width: 75px;">
                        <div class="machine-deletes" style="height: 16px; width: 16px; margin-top: 4px; margin-left: 5px; display: inline-block; float: left;"></div>
                        <span style="line-height: 28px; color: #fcfcfc;">批量删除</span>
                    </div>
                </div>
            </div>
            <div id="gridDiv" style="width: 100%; border-left: 1px solid #ddd; border-top: 1px solid #ddd;"></div>
        </div>
    </div>
    <div id="EditDiv" class="MachineEdit" style="height: 250px; width: 500px; overflow: hidden">
        <div class="Row">
            <div class="Cell">
                <div class="dev-textbox" name="farmname" style="width: 239px; height: 24px; margin-top: 6px;"
                    opt='{"MaxLength":18,"TipInfo":"18位以内","Required":true,"HeaderCSS":{"padding":"0px","width":"85px"},"IsOverShow":true,"Padding":"0px 5px","Title":"<div class=\"Title\"><span>&nbsp;名称</span></div>"}'>
                </div>
            </div>
            <div class="Cell">
                <div style="width: 80px; height: 100%; line-height: 35px; text-align: right; padding-right: 5px; float: left">选择组织</div>
                <div id="treecomboDiv" style="height: 24px; width: 154px; margin-top: 5px; display: block; float: left;">
                </div>
            </div>
        </div>
        <div class="Row">
            <div class="Cell">
                <div class="dev-combobox" id="macType" name="farmtype" style="width: 239px; height: 24px; margin-top: 6px;" opt='{ "PopupHeight":"auto","TextField":"data","ValueField":"id","TipInfo":"请选择","Required":true, "HeaderCSS":{"padding":"0px","width":"85px"},"IsOverShow":true,"Padding":"0px 5px","Title":"<div class=\"Title\"><span>农具类型</span></div>"}'></div>
            </div>
            <div class="Cell">
                <div class="dev-textbox" name="farmspec" style="width: 239px; height: 24px; margin-top: 6px;" opt='{"MaxLength":18,"Required":true, "TipInfo":"18位以内","HeaderCSS":{"padding":"0px","width":"85px"},"IsOverShow":true,"Padding":"0px 5px","Title":"<div class=\"Title\"><span>农具型号</span></div>"}'></div>
            </div>
        </div>
        <div class="Row">
            <div class="Cell">
                <div class="dev-textbox" name="vendor" style="width: 488px; height: 24px; margin-top: 6px;" maxlength='256' opt='{"MaxLength":18,"Required":true,"TipInfo":"18位以内","HeaderCSS":{"padding":"0px","width":"85px"},"IsOverShow":true,"Padding":"0px 5px","Title":"<div class=\"Title\"><span>厂商</span></div>"}'></div>
            </div>
        </div>

        <div class="Row">
            <div class="Cell">
                <div class="dev-numberbox" name="farmsize" style="width: 239px; height: 24px; margin-top: 6px;"
                    opt='{"MaxLength":4,"Precision":2,"Min":0,"Max":999,"HeaderCSS":{"padding":"0px","width":"85px"},"IsOverShow":true,"Padding":"0px 5px","Title":"<div class=\"Title\"><span>农具长度(m)</span></div>"}'>
                </div>
            </div>
            <div class="Cell">
                <div class="dev-numberbox" name="farmwidth" style="width: 239px; height: 24px; margin-top: 6px;"
                    opt='{"MaxLength":3,"Precision":2,"Min":0,"Max":20,"HeaderCSS":{"padding":"0px","width":"85px"},"IsOverShow":true,"Padding":"0px 5px","Title":"<div class=\"Title\"><span>农具宽度(m)</span></div>"}'>
                </div>
            </div>
        </div>
        <div class="Row" style="height: 65px; width: 100%; border-bottom: 1px solid #ddd;">
            <div class="Cell" style="height: 61px; width: 488px;">
                <div class="dev-textbox" name="remark" style="z-index: 2; width: 488px; height: 55px; margin-top: 6px;"
                    opt='{"MaxLength":120,"TipInfo":"","Type":"multi-text","HeaderCSS":{"padding":"0px","width":"85px"},"IsOverShow":true,"Padding":"5px","Title":"<div class=\"Title\">备 注</div>"}'>
                </div>
            </div>
        </div>
        <div id="errorMsg"
            style="height: 35px; width: 200px; line-height: 35px; display: inline-block; color: red; padding-left: 10px; margin-left: 20px;">
        </div>
        <div class="Submit" style="height: 35px">
            <div class="Button" tag="save">
                <span style="line-height: 26px; color: #fcfcfc;">保&nbsp;&nbsp;存</span>
            </div>
            <div class="Button" tag="cancel">
                <span style="line-height: 26px; color: #fcfcfc;">取&nbsp;&nbsp;消</span>
            </div>
        </div>
    </div>
</body>
</html>
