<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>对比分析</title>
    <link rel="stylesheet" href="../../theme/default/easyui.css" />
    <link rel="stylesheet" type="text/css" href="../../theme/icon.css" />
    <link rel="stylesheet" type="text/css" href="../../css/app.css" />
    <link rel="stylesheet" type="text/css" href="../../css/main.css" />
    <link rel="stylesheet" type="text/css" href="../../css/icon.css" />
    <link type="text/css" href="../../css/dev.css" rel="stylesheet" />
    <script type="text/javascript" src="../../js/jquery.min.js"></script>
    <script type="text/javascript" src="../../js/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="../../js/easyui-lang-zh_CN.js"></script>
    <script type="text/javascript" src="../../js/data.util.js"></script>
    <script type="text/javascript" src="../../js/linq.min.js"></script>
    <script type="text/javascript" src="../../js/guid.js"></script>
    <script type="text/javascript" src="../../js/jquery.dev.control.js"></script>
    <script type="text/javascript" src="../../js/highcharts.js"></script>
    <script type="text/javascript" src="../../js/highcharts-zh_CN.js"></script>
    <script type="text/javascript" src="../../js/highcharts-more.js"></script>
    <script type="text/javascript" src="../../js/dev.ui.js"></script>
    <style type="text/css">
        .checkcontains {
            display: inline-block;
            height: 17px;
            padding-top: 9px;
            padding-left: 5px;
            padding-bottom: 9px;
            padding-right: 5px;
        }

        .radiocontains {
            display: inline-block;
            height: 16px;
            padding-top: 11px;
            padding-bottom: 8px;
        }

        .analytitle {
            width: 60px;
            text-align: right;
            padding-right: 5px;
            display: inline-block;
            float: left;
            line-height: 35px;
        }

        .analycontain {
            display: inline-block;
            margin-left: 5px;
        }

        .analyButton {
            width: 75px;
            height: 22px;
            margin-top: 6px;
            background-color: #16dbbb;
            text-align: center;
            border: 1px solid #16dbbb;
            cursor: default;
        }

        .analyButton:active {
                background-color: #210097;
                cursor: pointer;
            }

        .analyCloseBtn {
            top: 0px;
            width: 30px;
            height: 40px;
            text-align: center;
            right: 0px;
            color: rgb(255, 255, 255);
            line-height: 35px;
            padding-left: 10px;
            font-size: 30px;
            font-weight: bold;
            position: absolute;
            border-bottom-left-radius: 60px;
            background-color: rgba(0, 0, 0, 0.6);
            cursor: pointer;
        }
    </style>
    <script type="text/javascript">
        var Dev = window.top.window.dev;
        var parent;
        var monitortypes;
        var treecontrol;
        var amscontrols = [], typecontrols = [], statictcontrols = []; charttypecontrols = [];
        var checekdams_list = [];
        var allamscontrol;
        var exportform;//导出Excel
        function WidgetCommunication(s) {
            parent = s.parent;
            init();
            gettypes();
            inittree();
            resize();
            $(window).resize(function () { resize(); });
            $(".analyButton").click(function () {
                var tag = $(this).attr("tag");
                if (tag == "stat")
                    getstaticdata();
                if (tag == "reset") {
                    if (!Dev.IsNull(typecontrols) && typecontrols.length > 0) typecontrols[0].SetChecked(true);
                    if (!Dev.IsNull(statictcontrols) && statictcontrols.length > 0) statictcontrols[0].SetChecked(true);
                    if (!Dev.IsNull(charttypecontrols) && charttypecontrols.length > 0) charttypecontrols[0].SetChecked(true);
                    $("#time1").datebox("setValue", Dev.GetDateString(new Date((new Date().getTime() - 24 * 6 * 3600 * 1000)), true));
                    $("#time2").datebox("setValue", Dev.GetDateString(new Date(), true));
                    $("#errormsg").html("");
                    $("#chartcontains").empty();
                    getstaticdata();
                }
                if (tag == "export") exportExcel();
            });
            $(".analyCloseBtn").click(function () {//做释放
                parent.unbind("onClosing");
                clear();
                Dev.App.MenuInit.CloseCurrentWidget();
            });
            parent.one("onClosing", function () {
                clear();
            });
        }
        function init() {
            $("#statictypecontain").empty();
            $("#showtypecontain").empty();
            var statdiv1 = $('<div class="radiocontains" name="statictype"></div>').appendTo($("#statictypecontain"));
            var hourradio = new Dev.Radio({ Parent: statdiv1, Value: "H", Name: "staticType", Text: "小时均值", Checked: true });
            hourradio.bind("onChange", function (s, e) { staticcheckchange(e); })
            var statdiv2 = $('<div class="radiocontains" name="statictype"></div>').appendTo($("#statictypecontain"));
            var dayradio = new Dev.Radio({ Parent: statdiv2, Value: "D", Name: "staticType", Text: "日均值" });
            dayradio.bind("onChange", function (s, e) { staticcheckchange(e); })
            var statdiv3 = $('<div class="radiocontains" name="statictype"></div>').appendTo($("#statictypecontain"));
            var monthradio = new Dev.Radio({ Parent: statdiv3, Value: "M", Name: "staticType", Text: "月均值" });
            monthradio.bind("onChange", function (s, e) { staticcheckchange(e); })
            statictcontrols.push(hourradio);
            statictcontrols.push(dayradio);
            statictcontrols.push(monthradio);
            //显示方式
            var showdiv1 = $('<div class="radiocontains" name="statictype"></div>').appendTo($("#showtypecontain"));
            var lineradio = new Dev.Radio({ Parent: showdiv1, Value: "line", Name: "ChartType", Text: "折线图", Checked: true });
            lineradio.bind("onChange", function (s, e) { chartcheckedchange(e); });
            var showdiv2 = $('<div class="radiocontains" name="statictype"></div>').appendTo($("#showtypecontain"));
            var columnradio = new Dev.Radio({ Parent: showdiv2, Value: "column", Name: "ChartType", Text: "柱状图" });
            columnradio.bind("onChange", function (s, e) { chartcheckedchange(e); });
            charttypecontrols.push(lineradio);
            charttypecontrols.push(columnradio);
            //初始化时间
            var endtime = Dev.GetDateString(new Date(), true);
            $("#time2").datebox("setValue", endtime);
            var starttime = Dev.GetDateString(new Date((new Date().getTime() - 24 * 6 * 3600 * 1000)), true);
            $("#time1").datebox("setValue", starttime);
        }
        function inittree() {
            treecontrol = $(".dev-tree").prop("$this");
            treecontrol.bind("onSelectChanged", function (s, e) {
                getamdata(e.$this.id);

            });
            var orgid = Dev.cookie.user.orgid;
            $.ajax({
                url: Dev.GetSystemUrlByRelID("Service") + "organize/gettreebyid/" + orgid + "?" + new Date().getTime(),
                type: "Get",
                contentType: 'application/json',
                dataType: 'json',
                success: function (result) {
                    treeData = Dev.ConvertTreeData(result.data, orgid);
                    treecontrol.LoadData(treeData);
                    if (treeData.length > 0) treecontrol.SetSelectNode(treecontrol.GetRoots()[0]);
                }
            });
        }
        function getamdata(orgid) {
            if (Dev.IsNull(orgid)) return;
            $.ajax({
                type: "POST",
                data: { orgId: orgid },
                url: Dev.cookie.baseUri + "amstation/findAmsByOrgIdAndWhere",
                success: function (response) {
                    $("#amscontain").empty();
                    $("#amscontain").css("height", "auto");
                    $("#errormsg").html("");
                    $("#chartcontains").empty();
                    amscontrols = [];
                    if (Dev.IsNull(response.data) || response.data.length == 0) {
                        $("#errormsg").html("提示:请先注册站点,再进行站点注册!");
                        $("#amscontain").css("height", "35px");
                        return;
                    }
                    //添加全选
                    var allchecke = { no: "全选", serialnumber: "ALL" };
                    response.data.unshift(allchecke);
                    for (var i = 0; i < response.data.length; i++) {
                        var currdata = response.data[i];
                        var checkcontain = $('<div class="checkcontains" name="ams"></div>').appendTo($("#amscontain"));
                        var checek = new Dev.CheckBox({
                            Text: currdata.no,
                            Checked: true,
                            Width: 110,
                            ThreeState: i == 0
                        });
                        checek.Target.appendTo(checkcontain);
                        checek.label.css("line-height", "18px");
                        checek.Target.prop("data", currdata);
                        if (response.data[i].serialnumber != "ALL") {
                            amscontrols.push(checek);

                        }
                        else allamscontrol = checek;
                        checek.bind("onChange", function (s, e) {
                            var currdata = $(s.currentTarget).prop("data");
                            if (Dev.IsNull(currdata)) return;
                            if (currdata.serialnumber == "ALL") {
                                if (Dev.IsNull(e)) return;
                                for (var i = 0; i < amscontrols.length; i++) amscontrols[i].SetChecked(e);
                            }
                            else {
                                var checknode = [];
                                for (var i = 0; i < amscontrols.length; i++) {
                                    if (amscontrols[i].Checked) checknode.push(amscontrols[i]);
                                }
                                if (checknode.length == 0) allamscontrol.SetChecked(false);
                                if (checknode.length == amscontrols.length) allamscontrol.SetChecked(true);
                                if (checknode.length > 0 && checknode.length < amscontrols.length) allamscontrol.SetChecked(null);
                            }
                        });
                    }
                    getstaticdata();
                }
            });
        }//获取站点数据
        function gettypes() {
            monitortypes = Dev.GetDicData(["monitortype"]);
            $("#typescontain").empty();
            typecontrols = [];
            if (Dev.IsNull(monitortypes) || monitortypes.length == 0) return;
            for (var i = 0; i < monitortypes.length; i++) {
                //加载单选按钮
                var radiocontains = $('<div class="radiocontains" name="monitortype"></div>').appendTo($("#typescontain"));
                var radiocontrol = new Dev.Radio({
                    Parent: radiocontains,
                    Value: monitortypes[i].code,
                    Name: monitortypes[i].type,
                    Text: monitortypes[i].data,
                    Checked: i == 0
                });
                radiocontrol.bind("onChange", function (s, e) {
                    for (var i = 0; i < typecontrols.length; i++) {
                        if (typecontrols[i].Value == e.Value) continue;
                        if (typecontrols[i].Checked) typecontrols[i].SetCheckState(false);
                    }
                });
                typecontrols.push(radiocontrol);
            }
        }//初始化监测数据类型
        function getstaticdata() {
            //获取所有勾选的监测站点
            $("#errormsg").html("");
            $("#chartcontains").empty();
            var checkedams = "";
            checekdams_list = [];
            if (amscontrols.length == 0) {
                $("#errormsg").html("提示:请先注册站点,再进行站点注册!");
                return;
            }
            if (amscontrols.length > 0) {
                for (var i = 0; i < amscontrols.length; i++) {
                    if (amscontrols[i].Checked) {
                        checkedams += amscontrols[i].Target.prop("data").serialnumber + ",";
                        checekdams_list.push(amscontrols[i].Target.prop("data"));
                    }
                }
                checkedams = checkedams.substr(0, checkedams.length - 1);
            }
            if (checkedams.length == 0) {
                $("#errormsg").html("提示:请勾选对比监测站点!");
                return;
            }
            var stattype = getcheckstattype();
            if (Dev.IsNull(stattype)) {
                $("#errormsg").html("提示:请选择统计类型!");
                return;
            }
            var selecttype;
            for (var i = 0; i < statictcontrols.length; i++) {
                if (statictcontrols[i].Checked) selecttype = statictcontrols[i].Value;
            }
            //月统计，不能超过2年
            var starttime = $("#time1").datebox("getValue") + " 00:00:00";
            var endtime = $("#time2").datebox("getValue") + " 23:59:59";
            if (new Date(endtime.replace(/-/g, "/")).getTime() - new Date(starttime.replace(/-/g, "/")).getTime() < 0) {
                $("#errormsg").html("提示:对比起始时间不能大于对比结束时间!");
                return;
            }
            if (selecttype == "H") {//小时均值，不能超过7天
                if (new Date(endtime.replace(/-/g, "/")).getTime() - new Date(starttime.replace(/-/g, "/")).getTime() > 7 * 24 * 3600 * 1000) {
                    $("#errormsg").html("提示:对比小时均值时间段不能超过7天!");
                    return;
                }
            }
            if (selecttype == "D") {
                if (new Date(endtime.replace(/-/g, "/")).getTime() - new Date(starttime.replace(/-/g, "/")).getTime() > 31 * 24 * 3600 * 1000) {
                    $("#errormsg").html("提示:对比日均值时间段不能超过一个月!");
                    return;
                }
            }
            if (selecttype == "M") {//最多一年
                if (new Date(endtime.replace(/-/g, "/")).getTime() - new Date(starttime.replace(/-/g, "/")).getTime() > 366 * 24 * 3600 * 1000) {
                    $("#errormsg").html("提示:对比月均值时间段不能超过一年!");
                    return;
                }
            }
            var con = "\"UPLOADDATE\">='" + starttime + "' AND \"UPLOADDATE\"<='" + endtime + "'";
            $.ajax({
                url: Dev.GetSystemUrlByRelID("Service") + "meteorYtjData/queryManyAmsDataByMDH",
                type: "POST",
                dataType: 'json',
                data: {
                    meteorSerNums: checkedams,
                    dateType: selecttype,
                    where: con
                },
                success: function (result) {
                    var statdata = initchartdata(result.result);
                    if (!Dev.IsNull(statdata)) initchart(statdata);
                }
            });
        }
        //初始化统计图
        function initchart(statdata) {
            //判断是折线图还是柱状图
            //判断类型
            var stattype = statdata.statictype;
            var stattypeinfo = Enumerable.From(monitortypes).Where('s=>s.code=="' + stattype + '"').FirstOrDefault();
            var selecttype;
            for (var i = 0; i < statictcontrols.length; i++) {
                if (statictcontrols[i].Checked) {
                    if (statictcontrols[i].Value == "H") selecttype = "小时均值";
                    if (statictcontrols[i].Value == "D") selecttype = "日均值";
                    if (statictcontrols[i].Value == "M") selecttype = "月均值";
                }
            }
            $("#chartcontains").highcharts({
                chart: { type: getcharttype() },
                title: {
                    text: stattypeinfo.data + selecttype + "统计",
                    style: { "color": "#333333", "fontSize": "14px" }
                },
                xAxis: { categories: statdata.categories },
                yAxis: { title: { text: stattypeinfo.data } },
                credits: { enabled: false },
                plotOptions: {
                    line: {
                        dataLabels: {
                            enabled: false          // 开启数据标签
                        }
                    }
                },
                series: statdata.Series
            });
        }
        //处理统计图数据
        function initchartdata(data) {
            if (Dev.IsNull(data) || data.length == 0) {
                var left = ($("#chartcontains").width() - 200) / 2;
                var top = ($("#chartcontains").height() - 35) / 2;
                $("#chartcontains").append('<div style="font-size:16px;color:red;width:200px;margin-left:' + left + 'px;margin-top:' + top + 'px">暂无相关对比数据!</div>');

                return;
            }//显示暂无数据
            var stattype = getcheckstattype();
            var alltime = Enumerable.From(data).Select('s=>s.to_char').Distinct().ToArray();
            var series = [];
            for (var i = 0; i < checekdams_list.length; i++) {
                var currseries = { name: checekdams_list[i].no, data: [] };
                //根据X轴设置数据
                //获取该序列号对应的所有数据
                var currdata = Enumerable.From(data).Where('s=>s.METEORSERNUM=="' + checekdams_list[i].serialnumber + '"').ToArray();
                if (Dev.IsNull(currdata) || currdata.length == 0) {
                    series.push(currseries);
                    continue;
                }
                for (var j = 0; j < alltime.length; j++) {
                    var cdata = Enumerable.From(currdata).Where('s=>s.to_char=="' + alltime[j] + '"').FirstOrDefault();
                    if (Dev.IsNull(cdata)) currseries.data.push(0);
                    else currseries.data.push(parseFloat(cdata[stattype].toFixed(3)));
                }
                series.push(currseries);
            }
            return { categories: alltime, Series: series, statictype: stattype }
        }
        //辅助函数
        function clear() {
            if (!Dev.IsNull(allamscontrol)) allamscontrol.unbind("onChange");
            if (!Dev.IsNull(amscontrols) && amscontrols.length > 0) {
                for (var i = 0; i < amscontrols.length; i++) amscontrols[i].unbind("onChange");
            }
            if (!Dev.IsNull(statictcontrols) && statictcontrols.length > 0) {
                for (var i = 0; i < statictcontrols.length; i++) statictcontrols[i].unbind("onChange");
            }
            if (!Dev.IsNull(charttypecontrols) && charttypecontrols.length > 0) {
                for (var i = 0; i < charttypecontrols.length; i++) charttypecontrols[i].unbind("onChange");
            }
            if (!Dev.IsNull(treecontrol)) treecontrol.unbind("onSelectChanged");
            $("#errormsg").html("");
            $("#chartcontains").empty();
        }
        function getcheckstattype() {
            var checktype;
            for (var i = 0; i < typecontrols.length; i++) {
                if (typecontrols[i].Checked) { checktype = typecontrols[i].Value; break; }
            }
            return checktype;
        }
        function getcharttype() {
            var charttype = "line";
            for (var i = 0; i < charttypecontrols.length; i++) {
                if (charttypecontrols[i].Checked) charttype = charttypecontrols[i].Value
            }
            return charttype;
        }
        function resize() {
            var w = $(window).width() - 350;
            $("#contrastBox").width($(window).width() - 280);
            $(".analycontain").width(w);
            var height = $(window).height() - $("#choosecontains").outerHeight();
            $("#chartcontains").height(height);
        }
        function staticcheckchange(e) {
            for (var i = 0; i < statictcontrols.length; i++) {
                if (statictcontrols[i].Value == e.Value) continue;
                if (statictcontrols[i].Checked) statictcontrols[i].SetCheckState(false);
            }
        }
        function chartcheckedchange(e) {
            for (var i = 0; i < charttypecontrols.length; i++) {
                if (charttypecontrols[i].Value == e.Value) continue;
                if (charttypecontrols[i].Checked) charttypecontrols[i].SetCheckState(false);
            }
        }

        //导出Excel 
        function exportExcel() {
            var type = 1;
            var serialnumbers = [], fields = [], indepdId = [];
            var datatype;
            // 统计方式
            for (var i = 0; i < statictcontrols.length; i++) {
                if (statictcontrols[i].Checked) datatype = statictcontrols[i].Value;
            }
            //监测站点
            if (!Dev.IsNull(amscontrols) && amscontrols.length > 0) {
                for (var i = 0; i < amscontrols.length; i++) {
                    if (amscontrols[i].Checked) {
                        serialnumbers.push(amscontrols[i].Target.prop("data").serialnumber);
                        indepdId.push(amscontrols[i].Target.prop("data").indepeid)
                    }
                }
            }
            //监测类型
            if (!Dev.IsNull(typecontrols) && typecontrols.length > 0) {
                for (var k = 0; k < typecontrols.length; k++) {
                    if (typecontrols[k].Checked) {
                        fields.push(typecontrols[k].Value);
                    }
                }
            }
            var starttime = $("#time1").datebox("getValue") + " 00:00:00";
            var endtime = $("#time2").datebox("getValue") + " 23:59:59";
            var con = "\"UPLOADDATE\">='" + starttime + "' AND \"UPLOADDATE\"<='" + endtime + "'";
            if (Dev.IsNull(exportform)) {
                exportform = $('<form id="expform" style="display: none;" method="post" enctype="application/x-www-form-urlencoded" target=""/>').appendTo(Dev.App.FillPanel.Target);
                exportform.attr("action", Dev.GetSystemUrlByRelID("Service") + "meteorYtjData/exportTextOrExcel");
                var input1 = $("<input></input>");
                input1.attr("type", "hidden");
                input1.attr({ "name": "type", "id": "ip1" });
                input1.attr("value", type);
                var input2 = $("<input></input>");
                input2.attr("type", "hidden");
                input2.attr({ "name": "fields", "id": "ip2" });
                input2.attr("value", fields);
                var input3 = $("<input></input>");
                input3.attr("type", "hidden");
                input3.attr({ "name": "serialnumbers", "id": "ip3" });
                input3.attr("value", serialnumbers);
                var input4 = $("<input></input>");
                input4.attr("type", "hidden");
                input4.attr({ "name": "datatype", "id": "ip4" });
                input4.attr("value", datatype);
                var input5 = $("<input></input>");
                input5.attr("type", "hidden");
                input5.attr({ "name": "indepdId", "id": "ip5" });
                input5.attr("value", indepdId.join(","));
                var input6 = $("<input></input>");
                input6.attr("type", "hidden");
                input6.attr({ "name": "where", "id": "ip6" });
                input6.attr("value", con);
                exportform.append(input1);
                exportform.append(input2);
                exportform.append(input3);
                exportform.append(input4);
                exportform.append(input5);
                exportform.append(input6);
            } else {
                $('#ip1', exportform).attr("value", type);
                $('#ip2', exportform).attr("value", fields);
                $('#ip3', exportform).attr("value", serialnumbers);
                $('#ip4', exportform).attr("value", datatype);
                $('#ip5', exportform).attr("value", indepdId.join(","));
                $('#ip6', exportform).attr("value", con);
            }
            try {
                exportform.submit();
            } catch (e) {

            }
            // $("#exportbt").attr("disabled", true);
        }
    </script>
</head>
<body>
    <div style="width: 100%; height: 100%; background: #FFFFFF;">
        <div id="leftBox" style="height: 100%; position: absolute; width: 280px;">
            <div id="treediv" style="width: 100%; height: 100%;">
                <div class="dev-tree" opt='{"ValueField":"id","TextField":"name","ChildrenField":"child","Height":220}'>
                </div>
            </div>
        </div>
        <div id="contrastBox" style="position: absolute; left: 280px; top: 0px; height: 100%; border-left: 1px solid #ddd;">
            <div id="choosecontains" style="width: 100%;">
                <div style="width: 100%; position: relative;">
                    <div class="analytitle">监测点</div>
                    <div id="amscontain" class="analycontain"></div>
                </div>
                <div style="width: 100%; position: relative;">
                    <div class="analytitle">监测类型</div>
                    <div id="typescontain" class="analycontain"></div>
                </div>
                <div style="width: 100%; position: relative;">
                    <div class="analytitle">统计方式</div>
                    <div id="statictypecontain" class="analycontain">
                    </div>
                </div>
                <div style="width: 100%; position: relative;">
                    <div class="analytitle">显示方式</div>
                    <div id="showtypecontain" class="analycontain">
                    </div>
                </div>
                <div style="width: 100%; position: relative;">
                    <div class="analytitle">统计条件</div>
                    <div id="filtercontain" class="analycontain">
                        <div style="float: left; display: inline-block; margin-left: 5px; line-height: 35px;">
                            <input id="time1" class="easyui-datebox" data-options="width:140,height:24,editable:false" />
                        </div>
                        <div style="float: left; display: inline-block; margin-left: 5px; line-height: 35px;">至</div>
                        <div style="float: left; display: inline-block; margin-left: 5px; line-height: 35px;">
                            <input id="time2" class="easyui-datebox" data-options="width:140,height:24,editable:false" />
                        </div>
                        <div style="float: left; display: inline-block; margin-left: 15px; line-height: 35px;">
                            <div class="analyButton" tag="stat">
                                <div class="icon-statgraph" style="height: 16px; width: 16px; margin-left: 8px; display: inline-block; float: left; margin-top: 3px;"></div>
                                <div style="line-height: 24px; color: #fcfcfc; display: inline-block; margin-left: 5px; float: left;">统&nbsp;计</div>
                            </div>
                        </div>
                        <div style="float: left; display: inline-block; margin-left: 15px; line-height: 35px;">
                            <div class="analyButton" tag="reset">
                                <div class="machine-reset" style="height: 16px; width: 16px; margin-left: 8px; display: inline-block; float: left; margin-top: 3px;"></div>
                                <div style="line-height: 24px; color: #fcfcfc; display: inline-block; margin-left: 5px; float: left;">重&nbsp;置</div>
                            </div>
                        </div>
                        <div style="float: left; display: inline-block; margin-left: 15px; line-height: 35px;">
                            <div class="analyButton" tag="export">
                                <div class="icon-export-white" style="height: 16px; width: 16px; margin-left: 8px; display: inline-block; float: left; margin-top: 3px;"></div>
                                <div style="line-height: 24px; color: #fcfcfc; display: inline-block; margin-left: 5px; float: left;">导&nbsp;出</div>
                            </div>
                        </div>
                        <div id="errormsg" style="display: inline-block; line-height: 35px; margin-left: 15px; color: red;"></div>
                    </div>
                </div>
            </div>
            <div id="chartcontains" style="width: 100%; position: relative; border-top: 1px solid #ddd;">
            </div>
        </div>
        <div class="analyCloseBtn">×</div>
    </div>
</body>
</html>
