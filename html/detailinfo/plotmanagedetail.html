<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>详细信息</title>
    <link rel="stylesheet" href="../../theme/default/easyui.css"/>
    <link rel="stylesheet" type="text/css" href="../../theme/icon.css"/>
    <link rel="stylesheet" type="text/css" href="../../css/app.css"/>
    <link rel="stylesheet" type="text/css" href="../../css/main.css"/>
    <link rel="stylesheet" type="text/css" href="../../css/icon.css"/>
    <link type="text/css" href="../../css/dev.css" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" href="../../theme/fontico/css/font-ico.min.css">
    <script type="text/javascript" src="../../js/jquery.min.js"></script>
    <script type="text/javascript" src="../../js/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="../../js/easyui-lang-zh_CN.js"></script>
    <script type="text/javascript" src="../../js/data.util.js"></script>
    <script type="text/javascript" src="../../js/jquery.dev.control.js"></script>
    <style type="text/css">
       .detail-container{
           position: fixed;
           width: 100%;
           height: 100%;
           box-sizing: border-box;

       }

        .detail-row{
            position: relative;
            width: 100%;
            height: 35px;
            border-bottom: 1px solid #dddddd;
            line-height: 35px;
            text-align: center;
        }
        .detail-left {
            position: absolute;
            display: inline-block;
            left: 0;
            height: 100%;
            width: 50%;
        }
        .detail-right {
            position: absolute;
            display: inline-block;
            right: 0;
            height: 100%;
            width: 50%;
        }

        .detail-title{
            position: absolute;
            left: 0;
            height: 100%;
            width: 75px;
            border-left: 1px solid #dddddd;
            border-right: 1px solid #dddddd;

        }

        .detail-content{
            position: absolute;
            left: 75px;
            right: 0;
            height: 100%;
            padding: 0 10px;
            text-align: left;
            text-overflow: ellipsis;
            overflow: hidden;
            white-space: nowrap;
        }

          .detail-content textarea {
            
            font-size:12px;
            }

        .img-container{
            width: 100%;
            height: 100%;

            display: flex;
            justify-content: space-around;
        }

        .img-div{
            width: 100px;
            height: 100px;
            margin: 15px;
            border: 1px solid #eeeeee;
            text-align: center;
            line-height: 100px;
            font-size: 45px;
            color: #cccccc;
        }

    </style>

</head>

<body style="height: 100%; width: 100%">

<div class="detail-container">
    <div class="detail-row">
        <div class="detail-left">
            <div class="detail-title">农户</div>
            <div name="farmername" class="detail-content detailval" title=""></div>
        </div>
        <div class="detail-right">
            <div class="detail-title">地类名称</div>
            <div name="classname" class="detail-content detailval" title=""></div>
        </div>
    </div>
    <div class="detail-row">
        <div class="detail-left">
            <div class="detail-title">权属性质</div>
            <div name="ownership" class="detail-content detailval" title=""></div>
        </div>
        <div class="detail-right">
            <div class="detail-title">耕地类型</div>
            <div name="landtype" class="detail-content detailval" title=""></div>
        </div>
    </div>
    <div class="detail-row" style="height: 40px">
        <div class="detail-title"  style="line-height: 40px">地块</div>
        <div class="detail-content" title="">
            <textarea name="geom_val" readonly="readonly" style="width: 100%;height: 100%;"></textarea>
        </div>
    </div>
    <div class="detail-row">
        <div class="detail-left">
            <div class="detail-title">基本农田类型</div>
            <div name="farmlandtype" class="detail-content detailval" title=""></div>
        </div>
        <div class="detail-right">
            <div class="detail-title">基本农田面积</div>
            <div name="farmlandarea" class="detail-content detailval" title=""></div>
        </div>
    </div>
    <div class="detail-row" style="height: 40px">
        <div class="detail-title"  style="line-height: 40px">权属单位名称</div>
        <div class="detail-content" title="">
            <textarea name="ownershipname" readonly="readonly" style="width: 100%;height: 100%;"></textarea>
        </div>
    </div>
    <div class="detail-row"  style="height: 40px">
        <div class="detail-title"  style="line-height: 40px">备注</div>
        <div class="detail-content" title="">
            <textarea name="remark" readonly="readonly" style="width: 100%;height: 100%;"></textarea>
        </div>
    </div>
    <div class="detail-row"  style="height: 150px;line-height: 20px">
        预览图片
        <div class="img-container">
            <div class="img-div">
                <i class="fa fa-user-circle-o"></i>
            </div>
            <div class="img-div">
                <i class="fa fa-user-circle-o"></i>
            </div>
            <div class="img-div">
                <i class="fa fa-user-circle-o"></i>
            </div>

        </div>
    </div>


</div>

<script type="text/javascript">
    var Dev = window.top.window.dev;
    var parent;

    function WidgetCommunication(s) {//部件通讯
        parent = s.parent;
        var showdata = s.param.showdata;
        getImageByAttid(showdata.attid);
        $(".detailval").each(function (index, dom) {
            var name = $(this).attr("name");
            if (name === "farmlandarea") {
                if (Dev.IsNull(showdata[name])) { return;}
                const value = Dev.SqrtMetersToMu(showdata[name], 3);
                $(this).text(value+ " 亩");
                return true
            }
            $(this).text(showdata[name]!=null?showdata[name]:"");

        });
        $("textarea").each(function () {
            var name = $(this).attr("name");
            if (name === "geom_val") {
                this.value = showdata["geom"].getCoordinates();
                return true;
            }
            this.value = showdata[name];
        });
        //点击图片预览
        $(".img-div").click(function(){
            if(Dev.IsNull(imgs) || imgs.length==0) return;
            var index=parseInt($(this).attr("index"));
            Dev.PreViewPics(imgs,index);
        });
        parent.one("onClosing", function () {


        });

    }
    var imgs=[];
    function getImageByAttid(attid) {
        var url = Dev.GetSystemUrlByRelID("Service") + "file/att/" + attid;
        $.ajax({
            url: url,
            type: "get",
            success:function (result) {
                $(".img-div").each(function (index, dom) {
                    if (index >= result.data.length) { return true;}
                    $(dom).attr("index",index);
                    $(dom).empty().append('<img src="' + result.data[index].path + '" width="100%" height="100%">');
                    imgs.push(result.data[index].path);
                });
            }
        });

    }

</script>
</body>
</html>
