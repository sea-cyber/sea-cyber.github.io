<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>农业大数据研究与管理平台</title>
    <link rel="stylesheet" type="text/css" href="theme/default/easyui.css" />
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="js/data.util.js"></script>
    <script type="text/javascript" src="js/linq.min.js"></script>
    <script type="text/javascript" src="js/md5.js"></script>
    <script type="text/javascript" src="js/jquery.cookie.js"></script>
    <link rel="icon" type="image/x-icon" href="image/logo.ico" />
    <style>
        * {
            margin: 0px;
            padding: 0px;
        }

        html {
            color: #000;
            background-color: #fff;
        }

        .content {
            width: 100%;
            height: 100%;
            position: relative;
        }

            .content .logo {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                min-width: 914px;
            }

        .contentleft {
            margin-left: 10%;
            margin-top: 7%;
            width: 80%;
            min-width: 914px;
            z-index: 99;
            position: relative;
            /*background:red;*/
        }

            .contentleft .title_content {
                height: 40px;
                line-height: 40px;
                font-size: 40px;
                color: #333333;
                margin-bottom: 35px;
            }

        .logininfo {
            width: 100%;
            height: 600px;
            background-color: #fff;
            box-shadow: 0px 0px 15px rgb(81, 199, 179);
        }

            .logininfo .loginright {
                float: right;
                height: 602px;
            }

        .logininfoLeft {
            width: calc(100% - 600px);
            display: inline-block;
            margin-left: 120px;
        }

            .logininfoLeft .welcomelogin {
                color: #14cdad;
                font-size: 29px;
                width: calc(100% - 250px);
                min-width:250px;
                height: 60px;
                line-height: 60px;
                margin-top: 70px;
                display: inline-block;
                border-bottom: 1px solid #d2d2d2;
            }

        .logindata {
            margin-top: 50px;
            position: relative;
            min-width:500px;
        }

            .logindata p label {
                position: absolute;
                height: 66px;
                line-height: 66px;
                margin-left: 10px;
            }

            .logindata p .paslogo {
                position: absolute;
                right: 260px;
                top: 128px;
            }

            .logindata p img {
                vertical-align: middle;
            }

            .logindata input[type=text],
            .logindata input[type=password] {
                height: 66px;
                line-height: 66px;
                width: calc(100% - 250px);
                margin-bottom: 40px;
                outline: none;
                background: #fff;
                border: 1px solid #ddd;
                font-size: 16px;
                text-indent: 40px;
            }

                .logindata input[type=text]::-webkit-input-placeholder,
                .logindata input[type=password]::-webkit-input-placeholder {
                    color: #ccc;
                    font-size: 16px;
                }

            .logindata button {
                width: calc(100% - 350px);
                height: 66px;
                line-height: 66px;
                background-color: #14cdad;
                text-align: center;
                border: none;
                color: #fff;
                font-size: 29px;
                outline: medium none;
                cursor: pointer;
            }

            .logindata input[type=text]:focus,
            .logindata input[type=password]:focus {
                border: 1px solid #14CDAD;
            }
    </style>

    <script type="text/javascript">
        var dialog;
        $(function () {
            $(window).resize(function () {
                var w = $(".login").width();
                var k = "";
            });
            dev.cookie.init();
            msg = {
                title: "系统提示",
                userName: "请输入用户名！",
                userPwd: "请输入密码！",
                validate: "用户名或密码错误，请重试!",
                timeout: "用户名失效，请与管理员联系！",
                netout: "网络超时，请稍后再试！"
            };
            dialog = $.messager;
            dialog.defaults.ok = "确定";
            dialog.defaults.cancel = "取消";
            dialog.defaults.height = 150;
            dialog.defaults.width = 250;

            $("#submit").click(function () {
                var name = $("#username").val();
                var pwd = $("#pwd").val();
                if (dev.IsNull(name)) {
                    dialog.alert(msg.title, msg.userName, "info");
                    return;
                }
                if (dev.IsNull(pwd)) {
                    dialog.alert(msg.title, msg.userPwd, "info");
                    return;
                }

                var user = { name: name, password: hex_md5(pwd) };
                $.ajax({
                    type: "POST",
                    data: JSON.stringify(user),
                    contentType: "application/json",
                    url: dev.cookie.baseUri + "user/login",
                    success: function (json) {
                        if (json.statusCode != 200 || dev.IsNull(json.data.id)) {
                            $.messager.alert(msg.title, msg.validate, "error");
                            return;
                        }
                        if (json.data.flag != 1) {
                            $.messager.alert(msg.title, msg.timeout, "info");
                            return;
                        }
                        if (dev.IsNull(json.data.photouri))
                            json.data.photouri = "image/authorization/default.jpg";
                        $.cookie("usertoken", JSON.stringify(json.data), { expires: 1 });
                        if (dev.cookie.config.SimpleMenu != "false") {
                            location.href = dev.cookie.rootPath + "index.html?param=" + dev.cookie.config.SimpleXml;
                        }
                        else location.href = dev.cookie.rootPath + "guidpage.html";
                    },
                    error: function (e) {
                        if (e.status == 200)
                            $.messager.alert(msg.title, msg.validate, "error");
                        else
                            $.messager.alert(msg.title, msg.netout, "error");
                    }
                });
            });
            $(".content").keypress(function (e) {
                var key = e.which;
                if (key == 13) $("#submit").click();
            });


            $("#username").focus(getnamelogo);
            $("#username").blur(gethidelogo);
            $("#pwd").focus(getpaslogo);
            $("#pwd").blur(getpashide);
            $("#ionck").click(function () {
                $("#pwd").attr("type", "text");
                $(this).css("display", "none");
                $("#ioncktwo").css("display", "inline-block");
            });
            $("#ioncktwo").click(function () {
                $("#pwd").attr("type", "password");
                $(this).css("display", "none");
                $("#ionck").css("display", "inline-block");
            });
            function getnamelogo() {
                // alert(1)
                $('#namelogo').attr('src', 'image/log/name04.png');
            }
            function gethidelogo() {
                $('#namelogo').attr('src', 'image/log/name02.png');
            }
            function getpaslogo() {
                // alert(1)
                $('#paslogo').attr('src', 'image/log/password04.png');
            }
            function getpashide() {
                $('#paslogo').attr('src', 'image/log/password02.png');
            }


        });
    </script>
</head>

<body>
    <div class="content">
        <img src="image/log/bg.png" alt="" class="logo" />
        <div class="contentleft">
            <div class="title_content">农业大数据研究与管理平台</div>
            <div class="logininfo">
                <div class="logininfoLeft">
                    <span class="welcomelogin">欢迎登录</span>
                    <div class="logindata">
                        <p>
                            <label for="username">
                                <img src="image/log/name02.png" id="namelogo" style="height: 21px;" alt="" /></label>
                            <input type="text" name="username" id="username" placeholder="请输入您的邮箱/电话/登录名">
                        </p>
                        <p>
                            <label for="pwd">
                                <img src="image/log/password02.png" id="paslogo" style="height: 21px;" alt="" /></label>
                            <input type="password" name="pwd" id="pwd" placeholder="请输入您的密码">
                            <span class="paslogo">
                                <img id="ionck" src="image/log/hide.png" style="height: 25px;" alt="" />
                                <img id="ioncktwo" src="image/log/showpassword02.png" style="height: 25px; display: none;" alt="">
                            </span>
                        </p>
                        <button id="submit">登&nbsp;录</button>
                    </div>
                </div>
                <img src="image/log/logo01.png" alt="" class="loginright" />
            </div>
        </div>
    </div>


</body>

</html>
